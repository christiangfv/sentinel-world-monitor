"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{330:(e,t,o)=>{o.r(t),o.d(t,{DisasterGlobe:()=>l});var n=o(5155),r=o(2115),i=o(501);function l(e){let{events:t,selectedEvent:o,onEventClick:l}=e,a=(0,r.useRef)(void 0),[s,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g(!0)},[]),(0,r.useEffect)(()=>{a.current&&(a.current.controls().autoRotate=!0,a.current.controls().autoRotateSpeed=.5)},[s]),(0,r.useEffect)(()=>{a.current&&o&&(a.current.controls().autoRotate=!1,a.current.pointOfView({lat:o.location.lat,lng:o.location.lng,altitude:1.5},2e3))},[o]);let u=e=>e>=4?"#E8E8F0":3===e?"#A07888":2===e?"#D4B57A":"#7088A0",c=e=>.05*e,p=e=>.5+.2*e,d=(0,r.useMemo)(()=>t.filter(e=>e.severity>=3),[t]);return s?(0,n.jsx)("div",{className:"w-full h-full cursor-move",children:(0,n.jsx)(i.A,{ref:a,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-dark.jpg",bumpImageUrl:"//unpkg.com/three-globe/example/img/earth-topology.png",backgroundImageUrl:"//unpkg.com/three-globe/example/img/night-sky.png",atmosphereColor:"#D4B57A",atmosphereAltitude:.15,pointsData:t,pointLat:e=>e.location.lat,pointLng:e=>e.location.lng,pointColor:e=>u(e.severity),pointAltitude:e=>c(e.severity),pointRadius:e=>p(e.severity),pointsMerge:!0,pointLabel:e=>'\n          <div style="background: rgba(13, 14, 20, 0.9); color: #E8E8F0; padding: 4px 8px; border-radius: 4px; border: 1px solid #4A5060;">\n            <div style="font-weight: bold;">'.concat(e.title,'</div>\n            <div style="font-size: 10px; color: #8890A0;">').concat(e.disasterType,"</div>\n          </div>\n        "),onPointClick:e=>null==l?void 0:l(e),ringsData:d,ringLat:e=>e.location.lat,ringLng:e=>e.location.lng,ringColor:()=>"#F87171",ringMaxRadius:e=>5*e.severity,ringPropagationSpeed:2,ringRepeatPeriod:1e3})}):null}}}]);