{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../src/components/ui/Card.tsx","../../../../src/components/pwa/PWAInstallPrompt.tsx","../../../../src/lib/hooks/usePWA.ts"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","import { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\nconst Card = forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'rounded-lg border bg-card text-card-foreground shadow-sm',\n        className\n      )}\n      {...props}\n    />\n  )\n);\nCard.displayName = 'Card';\n\nconst CardHeader = forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('flex flex-col space-y-1.5 p-6', className)}\n      {...props}\n    />\n  )\n);\nCardHeader.displayName = 'CardHeader';\n\nconst CardTitle = forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h3\n      ref={ref}\n      className={cn(\n        'text-2xl font-semibold leading-none tracking-tight',\n        className\n      )}\n      {...props}\n    />\n  )\n);\nCardTitle.displayName = 'CardTitle';\n\nconst CardDescription = forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => (\n    <p\n      ref={ref}\n      className={cn('text-sm text-muted-foreground', className)}\n      {...props}\n    />\n  )\n);\nCardDescription.displayName = 'CardDescription';\n\nconst CardContent = forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n  )\n);\nCardContent.displayName = 'CardContent';\n\nconst CardFooter = forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('flex items-center p-6 pt-0', className)}\n      {...props}\n    />\n  )\n);\nCardFooter.displayName = 'CardFooter';\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","'use client';\n\nimport { useState } from 'react';\nimport { usePWA } from '@/lib/hooks/usePWA';\nimport { Button } from '@/components/ui/Button';\nimport { Card, CardContent } from '@/components/ui/Card';\n\nexport function PWAInstallPrompt() {\n  const { canInstall, installPWA, updatePWA, updateAvailable, isOffline } = usePWA();\n  const [dismissed, setDismissed] = useState(false);\n\n  if (dismissed) return null;\n\n  // Mostrar update disponible primero\n  if (updateAvailable) {\n    return (\n      <div className=\"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm\">\n        <Card className=\"bg-primary-500 text-white border-primary-600 shadow-lg\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"text-2xl\"></div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold\">Actualizaci贸n Disponible</h3>\n                <p className=\"text-sm opacity-90 mt-1\">\n                  Hay una nueva versi贸n de Sentinel disponible\n                </p>\n              </div>\n            </div>\n            <div className=\"flex gap-2 mt-4\">\n              <Button\n                size=\"sm\"\n                onClick={updatePWA}\n                className=\"bg-white text-primary-600 hover:bg-gray-100\"\n              >\n                Actualizar Ahora\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => setDismissed(true)}\n                className=\"border-white text-white hover:bg-white hover:text-primary-600\"\n              >\n                Despu茅s\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Mostrar prompt de instalaci贸n\n  if (canInstall) {\n    return (\n      <div className=\"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm\">\n        <Card className=\"bg-surface border-border shadow-lg\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"text-2xl\"></div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold\">Instalar Sentinel</h3>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  Instala la app para acceder m谩s r谩pido y recibir notificaciones\n                </p>\n              </div>\n              <button\n                onClick={() => setDismissed(true)}\n                className=\"text-muted-foreground hover:text-foreground\"\n                aria-label=\"Cerrar\"\n              >\n                \n              </button>\n            </div>\n            <div className=\"flex gap-2 mt-4\">\n              <Button\n                size=\"sm\"\n                onClick={installPWA}\n                className=\"flex-1\"\n              >\n                Instalar\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => setDismissed(true)}\n                className=\"flex-1\"\n              >\n                Despu茅s\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Mostrar indicador offline\n  if (isOffline) {\n    return (\n      <div className=\"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm\">\n        <Card className=\"bg-yellow-500 text-yellow-900 border-yellow-600 shadow-lg\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"text-2xl\"></div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold\">Modo Offline</h3>\n                <p className=\"text-sm opacity-90\">\n                  Funcionando sin conexi贸n\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return null;\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\n\n// Define the BeforeInstallPromptEvent interface\ninterface BeforeInstallPromptEvent extends Event {\n  readonly platforms: string[];\n  readonly userChoice: Promise<{\n    outcome: 'accepted' | 'dismissed';\n    platform: string;\n  }>;\n  prompt(): Promise<void>;\n}\n\n// Extend WindowEventMap\ndeclare global {\n  interface WindowEventMap {\n    beforeinstallprompt: BeforeInstallPromptEvent;\n  }\n}\n\ninterface PWAState {\n  isInstallable: boolean;\n  isInstalled: boolean;\n  isOffline: boolean;\n  updateAvailable: boolean;\n  registration: ServiceWorkerRegistration | null;\n}\n\nexport function usePWA() {\n  const [pwaState, setPwaState] = useState<PWAState>({\n    isInstallable: false,\n    isInstalled: false,\n    isOffline: false,\n    updateAvailable: false,\n    registration: null\n  });\n\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n\n  useEffect(() => {\n    // Solo ejecutar en el cliente\n    if (typeof window === 'undefined') return;\n\n    // Detectar si la app est谩 instalada\n    const checkInstalled = () => {\n      const isStandalone = window.matchMedia('(display-mode: standalone)').matches;\n      const isInWebAppiOS = (window.navigator as any).standalone === true;\n\n      setPwaState(prev => ({\n        ...prev,\n        isInstalled: isStandalone || isInWebAppiOS\n      }));\n    };\n\n    checkInstalled();\n\n    // Escuchar cambios en el display mode\n    const mediaQuery = window.matchMedia('(display-mode: standalone)');\n    mediaQuery.addListener(checkInstalled);\n\n    // Escuchar el evento beforeinstallprompt\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\n      setPwaState(prev => ({\n        ...prev,\n        isInstallable: true\n      }));\n    };\n\n    // Escuchar el evento appinstalled\n    const handleAppInstalled = () => {\n      setPwaState(prev => ({\n        ...prev,\n        isInstalled: true,\n        isInstallable: false\n      }));\n      setDeferredPrompt(null);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', handleAppInstalled);\n\n    // Verificar estado de conexi贸n\n    const handleOnline = () => setPwaState(prev => ({ ...prev, isOffline: false }));\n    const handleOffline = () => setPwaState(prev => ({ ...prev, isOffline: true }));\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // Estado inicial de conexi贸n\n    setPwaState(prev => ({ ...prev, isOffline: !window.navigator.onLine }));\n\n    // Registrar service worker si existe\n    if ('serviceWorker' in window.navigator) {\n      window.navigator.serviceWorker.ready.then(registration => {\n        setPwaState(prev => ({ ...prev, registration }));\n\n        // Escuchar actualizaciones del service worker\n        registration.addEventListener('updatefound', () => {\n          const newWorker = registration.installing;\n          if (newWorker) {\n            newWorker.addEventListener('statechange', () => {\n              if (newWorker.state === 'installed' && window.navigator.serviceWorker.controller) {\n                setPwaState(prev => ({ ...prev, updateAvailable: true }));\n              }\n            });\n          }\n        });\n      });\n    }\n\n    return () => {\n      mediaQuery.removeListener(checkInstalled);\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.removeEventListener('appinstalled', handleAppInstalled);\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  const installPWA = async () => {\n    if (!deferredPrompt) return false;\n\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n\n    setDeferredPrompt(null);\n    setPwaState(prev => ({\n      ...prev,\n      isInstallable: false,\n      isInstalled: outcome === 'accepted'\n    }));\n\n    return outcome === 'accepted';\n  };\n\n  const updatePWA = () => {\n    if (pwaState.registration?.waiting) {\n      pwaState.registration.waiting.postMessage({ type: 'SKIP_WAITING' });\n      window.location.reload();\n    }\n  };\n\n  const share = async (data: { title?: string; text?: string; url?: string }) => {\n    if (typeof navigator !== 'undefined' && navigator.share) {\n      try {\n        await navigator.share({\n          title: data.title || 'Sentinel - Monitoreo de Desastres',\n          text: data.text,\n          url: data.url || window.location.href\n        });\n        return true;\n      } catch (error) {\n        console.error('Error sharing:', error);\n      }\n    }\n    return false;\n  };\n\n  return {\n    ...pwaState,\n    installPWA,\n    updatePWA,\n    share,\n    canInstall: pwaState.isInstallable && !!deferredPrompt,\n    canShare: typeof navigator !== 'undefined' && !!navigator.share\n  };\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}