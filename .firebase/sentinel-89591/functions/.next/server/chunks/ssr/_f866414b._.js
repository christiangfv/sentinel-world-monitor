module.exports=[33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return i}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773),h=a.r(68063);function i({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}if(0===c.length)return null;let i=(0,h.getDeploymentIdQueryOrEmptyString)();return(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}${i}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60305,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19721),e=a.i(5788),f=a.i(96438);function g({onMyLocation:a,onToggleZones:d,showZones:e=!0,onFilterChange:g,className:h=""}){let[i,j]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:`absolute top-4 right-4 z-[1000] space-y-2 ${h}`,children:[(0,b.jsx)(f.Button,{size:"icon",variant:"secondary",className:"bg-surface border border-border shadow-lg hover:bg-accent",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(b=>{a?.()},a=>{console.error("Error getting location:",a)}):console.error("Geolocation not supported")},title:"Mi ubicaciÃ³n",children:"ðŸ“"}),d&&(0,b.jsx)(f.Button,{size:"icon",variant:e?"default":"secondary",className:"bg-surface border border-border shadow-lg",onClick:d,title:e?"Ocultar zonas":"Mostrar zonas",children:"ðŸ "}),(0,b.jsx)(f.Button,{size:"icon",variant:"secondary",className:"bg-surface border border-border shadow-lg",onClick:()=>j(!i),title:"Filtros",children:"ðŸ”"}),i&&(0,b.jsxs)("div",{className:"bg-surface border border-border rounded-lg p-3 shadow-lg min-w-[200px]",children:[(0,b.jsx)("h4",{className:"font-medium text-sm mb-3",children:"Filtros"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Severidad mÃ­nima"}),(0,b.jsxs)("select",{className:"w-full text-sm border border-border rounded px-2 py-1 bg-background",onChange:a=>g?.({minSeverity:parseInt(a.target.value)}),defaultValue:"1",children:[(0,b.jsx)("option",{value:"1",children:"Todas las severidades"}),(0,b.jsx)("option",{value:"2",children:"Severidad 2+"}),(0,b.jsx)("option",{value:"3",children:"Severidad 3+"}),(0,b.jsx)("option",{value:"4",children:"Solo severidad 4"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Tipo de desastre"}),(0,b.jsx)("div",{className:"space-y-1",children:[{value:"earthquake",label:"Sismos",icon:"ðŸŒ"},{value:"tsunami",label:"Tsunamis",icon:"ðŸŒŠ"},{value:"wildfire",label:"Incendios",icon:"ðŸ”¥"},{value:"flood",label:"Inundaciones",icon:"ðŸ’§"},{value:"storm",label:"Tormentas",icon:"ðŸŒ€"},{value:"volcano",label:"Volcanes",icon:"ðŸŒ‹"},{value:"landslide",label:"Deslizamientos",icon:"â›°ï¸"}].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)("input",{type:"checkbox",defaultChecked:!0,onChange:b=>{console.log(`${a.value}: ${b.target.checked}`)},className:"rounded border-border"}),(0,b.jsx)("span",{children:a.icon}),(0,b.jsx)("span",{children:a.label})]},a.value))})]})]}),(0,b.jsx)(f.Button,{size:"sm",className:"w-full mt-3",onClick:()=>j(!1),children:"Aplicar Filtros"})]}),(0,b.jsxs)("div",{className:"bg-surface border border-border rounded-lg p-3 shadow-lg",children:[(0,b.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Leyenda"}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-severity-4 rounded"}),(0,b.jsx)("span",{children:"Severidad 4"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-severity-3 rounded"}),(0,b.jsx)("span",{children:"Severidad 3"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-severity-2 rounded"}),(0,b.jsx)("span",{children:"Severidad 2"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-severity-1 rounded"}),(0,b.jsx)("span",{children:"Severidad 1"})]})]})]})]})}(0,d.default)(async()=>{},{loadableGenerated:{modules:[94970]},ssr:!1});let h=(0,d.default)(async()=>{},{loadableGenerated:{modules:[94970]},ssr:!1,loading:()=>(0,b.jsx)(e.LoadingSpinner,{text:"Cargando mapa..."})}),i=(0,d.default)(async()=>{},{loadableGenerated:{modules:[94970]},ssr:!1}),j=(0,d.default)(async()=>{},{loadableGenerated:{modules:[94735]},ssr:!1}),k=(0,d.default)(async()=>{},{loadableGenerated:{modules:[35692]},ssr:!1});function l({events:a,userZones:d=[],center:f=[-33.45,-70.65],zoom:l=5,height:m="400px",showControls:n=!0,showZones:o=!0,onEventClick:p,onZoneClick:q,onMyLocation:r,onToggleZones:s,onFilterChange:t,className:u=""}){let[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(o);return((0,c.useEffect)(()=>{w(!0)},[]),v)?(0,b.jsxs)("div",{className:`relative ${u}`,children:[(0,b.jsxs)(h,{center:f,zoom:l,style:{height:m,width:"100%"},className:"rounded-lg",children:[(0,b.jsx)(i,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),x&&d.map(a=>(0,b.jsx)(k,{zone:a,onClick:q},`zone-${a.id}`)),a.map(a=>(0,b.jsx)(j,{event:a,onClick:p},`event-${a.id}`))]}),n&&(0,b.jsx)(g,{onMyLocation:r,onToggleZones:()=>{y(!x),s?.()},showZones:x,onFilterChange:t})]}):(0,b.jsx)("div",{className:`bg-surface border border-border rounded-lg flex items-center justify-center ${u}`,style:{height:m},children:(0,b.jsx)(e.LoadingSpinner,{text:"Cargando mapa..."})})}a.s(["DisasterMap",()=>l],60305)},55486,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(79530);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",severity1:"border-transparent bg-severity-1 text-white",severity2:"border-transparent bg-severity-2 text-white",severity3:"border-transparent bg-severity-3 text-white",severity4:"border-transparent bg-severity-4 text-white"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},83700,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(76725);async function d(a={disasterTypes:[],minSeverity:1}){try{let d=[];a.disasterTypes&&a.disasterTypes.length>0&&d.push((0,b.where)("disasterType","in",a.disasterTypes)),a.minSeverity&&a.minSeverity>1&&d.push((0,b.where)("severity",">=",a.minSeverity)),d.push((0,b.orderBy)("eventTime","desc")),d.push((0,b.limit)(100));let e=(0,b.query)((0,b.collection)(c.db,"events"),...d);return(await (0,b.getDocs)(e)).docs.map(a=>{let b=a.data();return{id:a.id,...b,location:{lat:b.location.latitude,lng:b.location.longitude},eventTime:b.eventTime.toDate(),expiresAt:b.expiresAt?.toDate(),createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate()}})}catch(a){throw console.error("Error getting events:",a),Error("Error al obtener eventos")}}async function e(a){try{let d=(0,b.doc)(c.db,"events",a),e=await (0,b.getDoc)(d);if(e.exists()){let a=e.data();return{id:e.id,...a,location:{lat:a.location.latitude,lng:a.location.longitude},eventTime:a.eventTime.toDate(),expiresAt:a.expiresAt?.toDate(),createdAt:a.createdAt.toDate(),updatedAt:a.updatedAt.toDate()}}return null}catch(a){return console.error("Error getting event:",a),null}}function f(a,d={disasterTypes:[],minSeverity:1}){let e=[];d.disasterTypes&&d.disasterTypes.length>0&&e.push((0,b.where)("disasterType","in",d.disasterTypes)),d.minSeverity&&d.minSeverity>1&&e.push((0,b.where)("severity",">=",d.minSeverity)),e.push((0,b.orderBy)("eventTime","desc")),e.push((0,b.limit)(50));let g=(0,b.query)((0,b.collection)(c.db,"events"),...e);return(0,b.onSnapshot)(g,b=>{a(b.docs.map(a=>{let b=a.data();return{id:a.id,...b,location:{lat:b.location.latitude,lng:b.location.longitude},eventTime:b.eventTime.toDate(),expiresAt:b.expiresAt?.toDate(),createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate()}}))},a=>{console.error("Error subscribing to events:",a)})}async function g(a){try{let d=(0,b.query)((0,b.collection)(c.db,"users",a,"zones"),(0,b.orderBy)("createdAt","desc"));return(await (0,b.getDocs)(d)).docs.map(b=>{let c=b.data();return{id:b.id,userId:a,...c,location:{lat:c.location.latitude,lng:c.location.longitude},createdAt:c.createdAt.toDate()}})}catch(a){throw console.error("Error getting user zones:",a),Error("Error al obtener zonas")}}async function h(a,d){try{return(await (0,b.addDoc)((0,b.collection)(c.db,"users",a,"zones"),{...d,location:new b.GeoPoint(d.location.lat,d.location.lng),createdAt:b.Timestamp.now()})).id}catch(a){throw console.error("Error adding zone:",a),Error("Error al agregar zona")}}async function i(a,d,e){try{let f={...e};e.location&&(f.location=new b.GeoPoint(e.location.lat,e.location.lng)),await (0,b.updateDoc)((0,b.doc)(c.db,"users",a,"zones",d),f)}catch(a){throw console.error("Error updating zone:",a),Error("Error al actualizar zona")}}async function j(a,d){try{await (0,b.deleteDoc)((0,b.doc)(c.db,"users",a,"zones",d))}catch(a){throw console.error("Error deleting zone:",a),Error("Error al eliminar zona")}}a.s(["addUserZone",()=>h,"deleteUserZone",()=>j,"getEventById",()=>e,"getEvents",()=>d,"getUserZones",()=>g,"subscribeToEvents",()=>f,"updateUserZone",()=>i])}];

//# sourceMappingURL=_f866414b._.js.map