module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},46842,a=>{"use strict";var b=a.i(72131),c=a.i(65488),d=a.i(83700);function e(){let{user:a}=(0,c.useAuth)(),[e,f]=(0,b.useState)([]),[g,h]=(0,b.useState)(!1),[i,j]=(0,b.useState)(null),k=a?.uid,l=(0,b.useCallback)(async()=>{if(!k)return void f([]);try{h(!0),j(null);let a=await (0,d.getUserZones)(k);f(a)}catch(a){console.error("Error loading zones:",a),j("Error al cargar zonas")}finally{h(!1)}},[k]);(0,b.useEffect)(()=>{l()},[l]);let m=(0,b.useCallback)(async a=>{if(!k)throw Error("Usuario no autenticado");try{j(null);let b=await (0,d.addUserZone)(k,a);return await l(),b}catch(a){throw console.error("Error creating zone:",a),j("Error al crear zona"),a}},[k,l]),n=(0,b.useCallback)(async(a,b)=>{if(!k)throw Error("Usuario no autenticado");try{j(null),await (0,d.updateUserZone)(k,a,b),await l()}catch(a){throw console.error("Error updating zone:",a),j("Error al actualizar zona"),a}},[k,l]),o=(0,b.useCallback)(async a=>{if(!k)throw Error("Usuario no autenticado");try{j(null),await (0,d.deleteUserZone)(k,a),await l()}catch(a){throw console.error("Error deleting zone:",a),j("Error al eliminar zona"),a}},[k,l]),p=(0,b.useCallback)(async(a,b)=>n(a,{isActive:b}),[n]),q=e.filter(a=>a.isActive),r=(0,b.useCallback)((a,b,c=0)=>q.some(d=>{var e,f,g,h;let i,j,k;return e=a,f=b,g=d.location.lat,h=d.location.lng,2*Math.atan2(Math.sqrt(k=Math.sin((i=(e-g)*Math.PI/180)/2)*Math.sin(i/2)+Math.cos(g*Math.PI/180)*Math.cos(e*Math.PI/180)*Math.sin((j=(f-h)*Math.PI/180)/2)*Math.sin(j/2)),Math.sqrt(1-k))*6371<=d.radiusKm+c}),[q]);return{zones:e,activeZones:q,loading:g,error:i,createZone:m,updateZone:n,removeZone:o,toggleZone:p,refresh:l,isLocationInUserZones:r}}a.s(["useUserZones",()=>e])},17842,a=>{"use strict";var b=a.i(72131),c=a.i(83700);function d(a={disasterTypes:[],minSeverity:1}){let[e,f]=(0,b.useState)([]),[g,h]=(0,b.useState)(!0),[i,j]=(0,b.useState)(null);return(0,b.useEffect)(()=>(h(!0),j(null),(0,c.getEvents)(a).then(f).catch(a=>{console.error("Error loading events:",a),j("Error al cargar eventos")}).finally(()=>h(!1)),(0,c.subscribeToEvents)(a=>{f(a),j(null)},a)),[a.disasterTypes?.join(","),a.minSeverity,a.dateRange?.start.getTime(),a.dateRange?.end.getTime(),a.nearLocation?.lat,a.nearLocation?.lng,a.nearLocation?.radiusKm]),{events:e,loading:g,error:i,refresh:(0,b.useCallback)(async()=>{try{h(!0),j(null);let b=await (0,c.getEvents)(a);f(b)}catch(a){console.error("Error refreshing events:",a),j("Error al actualizar eventos")}finally{h(!1)}},[a])}}function e(a){let[d,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(!1),[h,i]=(0,b.useState)(null);return(0,b.useEffect)(()=>{a?(async()=>{try{g(!0),i(null);let b=await (0,c.getEventById)(a);e(b)}catch(a){console.error("Error loading event:",a),i("Error al cargar evento")}finally{g(!1)}})():e(null)},[a]),{event:d,loading:f,error:h,refetch:()=>{a&&(async()=>{try{g(!0),i(null);let b=await (0,c.getEventById)(a);e(b)}catch(a){console.error("Error refetching event:",a),i("Error al recargar evento")}finally{g(!1)}})()}}}a.s(["useEvent",()=>e,"useEvents",()=>d])},40777,a=>{"use strict";var b=a.i(87924),c=a.i(43218),d=a.i(60305),e=a.i(17842),f=a.i(46842),g=a.i(65488),h=a.i(62067),i=a.i(55486),j=a.i(50944);function k(){let{user:a}=(0,g.useAuth)(),{events:k,loading:l}=(0,e.useEvents)(),{zones:m}=(0,f.useUserZones)(),n=(0,j.useRouter)();return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(c.Header,{}),(0,b.jsxs)("main",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"text-center py-8 px-4 bg-gradient-to-b from-primary-50 to-background",children:[(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground mb-4",children:"Sentinel"}),(0,b.jsx)("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Monitoreo de desastres naturales en tiempo real"})]}),(0,b.jsxs)("div",{className:"container mx-auto px-4 pb-8",children:[(0,b.jsxs)(h.Card,{className:"mb-8",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:["ðŸŒ Mapa de Eventos",k.length>0&&(0,b.jsxs)(i.Badge,{variant:"secondary",children:[k.length," eventos"]})]})}),(0,b.jsx)(h.CardDescription,{children:"Eventos de desastres naturales reportados en las Ãºltimas 24 horas"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(d.DisasterMap,{events:k,userZones:m,height:"400px",onEventClick:a=>{n.push(`/event/${a.id}`)},onZoneClick:b=>{a?n.push("/settings"):n.push("/login")}})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-severity-4 mb-1",children:k.filter(a=>4===a.severity).length}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 4"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-severity-3 mb-1",children:k.filter(a=>3===a.severity).length}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 3"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-severity-2 mb-1",children:k.filter(a=>2===a.severity).length}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 2"})]})}),(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-severity-1 mb-1",children:k.filter(a=>1===a.severity).length}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 1"})]})})]}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(h.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsxs)(h.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"ðŸ””"}),(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Alertas en Tiempo Real"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(h.CardDescription,{className:"text-sm text-center",children:"Recibe notificaciones push cuando ocurra un desastre cerca de tus zonas configuradas."})})]}),(0,b.jsxs)(h.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsxs)(h.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"ðŸ“±"}),(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"AplicaciÃ³n PWA"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(h.CardDescription,{className:"text-sm text-center",children:"InstÃ¡lala en tu dispositivo y funciona sin conexiÃ³n a internet."})})]}),(0,b.jsxs)(h.Card,{className:"hover:shadow-md transition-shadow sm:col-span-2 lg:col-span-1",children:[(0,b.jsxs)(h.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"ðŸŽ¯"}),(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Zonas Personalizadas"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(h.CardDescription,{className:"text-sm text-center",children:"Configura zonas geogrÃ¡ficas de interÃ©s y recibe alertas especÃ­ficas."})})]})]})]})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__282060ed._.js.map