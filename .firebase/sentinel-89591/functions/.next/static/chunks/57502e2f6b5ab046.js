(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},18698,e=>{"use strict";var t=e.i(71645),r=e.i(28623);function s(e={disasterTypes:[],minSeverity:1}){let[a,n]=(0,t.useState)([]),[l,i]=(0,t.useState)(!0),[c,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>(i(!0),o(null),(0,r.getEvents)(e).then(n).catch(e=>{console.error("Error loading events:",e),o("Error al cargar eventos")}).finally(()=>i(!1)),(0,r.subscribeToEvents)(e=>{n(e),o(null)},e)),[e.disasterTypes?.join(","),e.minSeverity,e.dateRange?.start.getTime(),e.dateRange?.end.getTime(),e.nearLocation?.lat,e.nearLocation?.lng,e.nearLocation?.radiusKm]),{events:a,loading:l,error:c,refresh:(0,t.useCallback)(async()=>{try{i(!0),o(null);let t=await (0,r.getEvents)(e);n(t)}catch(e){console.error("Error refreshing events:",e),o("Error al actualizar eventos")}finally{i(!1)}},[e])}}function a(e){let[s,a]=(0,t.useState)(null),[n,l]=(0,t.useState)(!1),[i,c]=(0,t.useState)(null);return(0,t.useEffect)(()=>{e?(async()=>{try{l(!0),c(null);let t=await (0,r.getEventById)(e);a(t)}catch(e){console.error("Error loading event:",e),c("Error al cargar evento")}finally{l(!1)}})():a(null)},[e]),{event:s,loading:n,error:i,refetch:()=>{e&&(async()=>{try{l(!0),c(null);let t=await (0,r.getEventById)(e);a(t)}catch(e){console.error("Error refetching event:",e),c("Error al recargar evento")}finally{l(!1)}})()}}}e.s(["useEvent",()=>a,"useEvents",()=>s])},39313,e=>{"use strict";var t=e.i(71645),r=e.i(54579),s=e.i(28623);function a(){let{user:e}=(0,r.useAuth)(),[a,n]=(0,t.useState)([]),[l,i]=(0,t.useState)(!1),[c,o]=(0,t.useState)(null),d=e?.uid,x=(0,t.useCallback)(async()=>{if(!d)return void n([]);try{i(!0),o(null);let e=await (0,s.getUserZones)(d);n(e)}catch(e){console.error("Error loading zones:",e),o("Error al cargar zonas")}finally{i(!1)}},[d]);(0,t.useEffect)(()=>{x()},[x]);let h=(0,t.useCallback)(async e=>{if(!d)throw Error("Usuario no autenticado");try{o(null);let t=await (0,s.addUserZone)(d,e);return await x(),t}catch(e){throw console.error("Error creating zone:",e),o("Error al crear zona"),e}},[d,x]),u=(0,t.useCallback)(async(e,t)=>{if(!d)throw Error("Usuario no autenticado");try{o(null),await (0,s.updateUserZone)(d,e,t),await x()}catch(e){throw console.error("Error updating zone:",e),o("Error al actualizar zona"),e}},[d,x]),m=(0,t.useCallback)(async e=>{if(!d)throw Error("Usuario no autenticado");try{o(null),await (0,s.deleteUserZone)(d,e),await x()}catch(e){throw console.error("Error deleting zone:",e),o("Error al eliminar zona"),e}},[d,x]),g=(0,t.useCallback)(async(e,t)=>u(e,{isActive:t}),[u]),v=a.filter(e=>e.isActive),f=(0,t.useCallback)((e,t,r=0)=>v.some(s=>{var a,n,l,i;let c,o,d;return a=e,n=t,l=s.location.lat,i=s.location.lng,2*Math.atan2(Math.sqrt(d=Math.sin((c=(a-l)*Math.PI/180)/2)*Math.sin(c/2)+Math.cos(l*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin((o=(n-i)*Math.PI/180)/2)*Math.sin(o/2)),Math.sqrt(1-d))*6371<=s.radiusKm+r}),[v]);return{zones:a,activeZones:v,loading:l,error:c,createZone:h,updateZone:u,removeZone:m,toggleZone:g,refresh:x,isLocationInUserZones:f}}e.s(["useUserZones",()=>a])},52683,e=>{"use strict";var t=e.i(43476),r=e.i(3374),s=e.i(72881),a=e.i(18698),n=e.i(39313),l=e.i(54579),i=e.i(39964),c=e.i(96640),o=e.i(18566);function d(){let{user:e}=(0,l.useAuth)(),{events:d,loading:x}=(0,a.useEvents)(),{zones:h}=(0,n.useUserZones)(),u=(0,o.useRouter)();return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(r.Header,{}),(0,t.jsxs)("main",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"text-center py-8 px-4 bg-gradient-to-b from-primary-50 to-background",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground mb-4",children:"Sentinel"}),(0,t.jsx)("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Monitoreo de desastres naturales en tiempo real"})]}),(0,t.jsxs)("div",{className:"container mx-auto px-4 pb-8",children:[(0,t.jsxs)(i.Card,{className:"mb-8",children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:["ðŸŒ Mapa de Eventos",d.length>0&&(0,t.jsxs)(c.Badge,{variant:"secondary",children:[d.length," eventos"]})]})}),(0,t.jsx)(i.CardDescription,{children:"Eventos de desastres naturales reportados en las Ãºltimas 24 horas"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)(s.DisasterMap,{events:d,userZones:h,height:"400px",onEventClick:e=>{u.push(`/event/${e.id}`)},onZoneClick:t=>{e?u.push("/settings"):u.push("/login")}})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-severity-4 mb-1",children:d.filter(e=>4===e.severity).length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 4"})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-severity-3 mb-1",children:d.filter(e=>3===e.severity).length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 3"})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-severity-2 mb-1",children:d.filter(e=>2===e.severity).length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 2"})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-severity-1 mb-1",children:d.filter(e=>1===e.severity).length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Severidad 1"})]})})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(i.Card,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsxs)(i.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"ðŸ””"}),(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"Alertas en Tiempo Real"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)(i.CardDescription,{className:"text-sm text-center",children:"Recibe notificaciones push cuando ocurra un desastre cerca de tus zonas configuradas."})})]}),(0,t.jsxs)(i.Card,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsxs)(i.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"ðŸ“±"}),(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"AplicaciÃ³n PWA"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)(i.CardDescription,{className:"text-sm text-center",children:"InstÃ¡lala en tu dispositivo y funciona sin conexiÃ³n a internet."})})]}),(0,t.jsxs)(i.Card,{className:"hover:shadow-md transition-shadow sm:col-span-2 lg:col-span-1",children:[(0,t.jsxs)(i.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"ðŸŽ¯"}),(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"Zonas Personalizadas"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)(i.CardDescription,{className:"text-sm text-center",children:"Configura zonas geogrÃ¡ficas de interÃ©s y recibe alertas especÃ­ficas."})})]})]})]})]})]})}e.s(["default",()=>d])},52169,e=>{e.v(t=>Promise.all(["static/chunks/983c3130c13fb657.js","static/chunks/1442f9ddf5556540.js"].map(t=>e.l(t))).then(()=>t(94970)))},25e3,e=>{e.v(t=>Promise.all(["static/chunks/afeb58ac58e567e4.js","static/chunks/1442f9ddf5556540.js"].map(t=>e.l(t))).then(()=>t(94735)))},43144,e=>{e.v(t=>Promise.all(["static/chunks/4c2b9ae7e144ad91.js"].map(t=>e.l(t))).then(()=>t(35692)))}]);