(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{1708:(e,a,s)=>{"use strict";s.r(a),s.d(a,{DisasterMap:()=>x});var t=s(5155),n=s(2115),l=s(7711),r=s(631);function o(e){let{onMyLocation:a,onToggleZones:s,showZones:l=!0,onFilterChange:r}=e,[o,d]=(0,n.useState)(!1),c="w-9 h-9 bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg flex items-center justify-center text-sm hover:bg-[#4A5060]/30 hover:border-[#7088A0] transition-colors";return(0,t.jsxs)("div",{className:"absolute top-3 right-3 z-[1000] space-y-2",children:[(0,t.jsx)("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>null==a?void 0:a(),e=>console.error("Error getting location:",e))},className:c,title:"Mi ubicaci\xf3n",children:"\uD83D\uDCCD"}),s&&(0,t.jsx)("button",{onClick:s,className:"".concat(c," ").concat(l?"bg-[#D4B57A]/20 border-[#D4B57A]/50 text-[#D4B57A]":""),title:l?"Ocultar zonas":"Mostrar zonas",children:"\uD83C\uDFE0"}),(0,t.jsx)("button",{onClick:()=>d(!o),className:c,title:"Leyenda",children:"ℹ️"}),o&&(0,t.jsxs)("div",{className:"bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg p-3 shadow-xl min-w-[140px]",children:[(0,t.jsx)("h4",{className:"font-medium text-xs text-[#E8E8F0] mb-2",children:"Severidad"}),(0,t.jsxs)("div",{className:"space-y-1.5 text-xs text-[#8890A0]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#F87171]"}),(0,t.jsx)("span",{children:"Cr\xedtica"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#D4B57A]"}),(0,t.jsx)("span",{children:"Alta"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FBBF24]"}),(0,t.jsx)("span",{children:"Media"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#4ADE80]"}),(0,t.jsx)("span",{children:"Baja"})]})]})]})]})}s(8413);let d=(0,l.default)(()=>Promise.all([s.e(761),s.e(889)]).then(s.bind(s,1889)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[1889]},ssr:!1,loading:()=>(0,t.jsx)(r.k,{text:"Cargando mapa..."})}),c=(0,l.default)(()=>Promise.all([s.e(761),s.e(889)]).then(s.bind(s,1889)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[1889]},ssr:!1}),i=(0,l.default)(()=>Promise.all([s.e(761),s.e(284)]).then(s.bind(s,5903)).then(e=>({default:e.EventMarker})),{loadableGenerated:{webpack:()=>[5903]},ssr:!1}),u=(0,l.default)(()=>s.e(160).then(s.bind(s,4160)).then(e=>({default:e.ZoneCircle})),{loadableGenerated:{webpack:()=>[4160]},ssr:!1}),h=(0,l.default)(()=>s.e(88).then(s.bind(s,8088)).then(e=>({default:e.MapController})),{loadableGenerated:{webpack:()=>[8088]},ssr:!1});function x(e){let{events:a,selectedEvent:s,userZones:l=[],center:x=[-33.45,-70.65],zoom:b=5,height:m="400px",showControls:p=!0,showZones:g=!0,onEventClick:j,onZoneClick:f,onMyLocation:v,onToggleZones:C,onFilterChange:N,className:k=""}=e,[w,A]=(0,n.useState)(!1),[D,y]=(0,n.useState)(g);return((0,n.useEffect)(()=>{A(!0)},[]),w)?(0,t.jsxs)("div",{className:"w-full h-full ".concat(k),children:[(0,t.jsxs)(d,{center:x,zoom:b,style:{height:"100%",width:"100%"},zoomControl:!1,children:[(0,t.jsx)(h,{selectedEvent:s}),(0,t.jsx)(c,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://carto.com/">CARTO</a>'}),D&&l.map(e=>(0,t.jsx)(u,{zone:e,onClick:f},"zone-".concat(e.id))),a.map(e=>(0,t.jsx)(i,{event:e,onClick:j},"event-".concat(e.id)))]}),p&&(0,t.jsx)(o,{onMyLocation:v,onToggleZones:()=>{y(!D),null==C||C()},showZones:D,onFilterChange:N})]}):(0,t.jsx)("div",{className:"bg-surface border border-border rounded-lg flex items-center justify-center ".concat(k),style:{height:m},children:(0,t.jsx)(r.k,{text:"Cargando mapa..."})})}},8413:()=>{}}]);