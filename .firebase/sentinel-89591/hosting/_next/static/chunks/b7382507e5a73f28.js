(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,a,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},67585,(e,a,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return t}});let s=e.r(32061);function t({reason:e,children:a}){if("undefined"==typeof window)throw Object.defineProperty(new s.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}},9885,(e,a,r)=>{"use strict";function s(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return s}})},52157,(e,a,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return o}});let s=e.r(43476),t=e.r(74080),n=e.r(63599),i=e.r(9885),l=e.r(43369);function o({moduleIds:e}){if("undefined"!=typeof window)return null;let a=n.workAsyncStorage.getStore();if(void 0===a)return null;let r=[];if(a.reactLoadableManifest&&e){let s=a.reactLoadableManifest;for(let a of e){if(!s[a])continue;let e=s[a].files;r.push(...e)}}if(0===r.length)return null;let o=(0,l.getDeploymentIdQueryOrEmptyString)();return(0,s.jsx)(s.Fragment,{children:r.map(e=>{let r=`${a.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}${o}`;return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:a.nonce},e):((0,t.preload)(r,{as:"script",fetchPriority:"low",nonce:a.nonce}),null)})})}},69093,(e,a,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return d}});let s=e.r(43476),t=e.r(71645),n=e.r(67585),i=e.r(52157);function l(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let a={...o,...e},r=(0,t.lazy)(()=>a.loader().then(l)),d=a.loading;function c(e){let l=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!a.ssr||!!a.loading,c=o?t.Suspense:t.Fragment,u=a.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(i.PreloadChunks,{moduleIds:a.modules}):null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(c,{...o?{fallback:l}:{},children:u})}return c.displayName="LoadableComponent",c}},70703,(e,a,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return t}});let s=e.r(55682)._(e.r(69093));function t(e,a){let r={};"function"==typeof e&&(r.loader=e);let t={...r,...a};return(0,s.default)({...t,modules:t.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),a.exports=r.default)},37772,e=>{"use strict";let a={abyss:"#0D0E14",shadow:"#1A1B22",plasma:"#D4B57A",mist:"#7088A0",sakura:"#A07888",smoke:"#8890A0",muted:"#E8E8F0"},r={earthquake:{id:"earthquake",name:"Earthquake",nameEs:"Sismo",icon:"üåç",color:a.plasma,severityLabels:{1:"Menor (< 4.0)",2:"Leve (4.0 - 5.0)",3:"Moderado (5.0 - 6.0)",4:"Severo (> 6.0)"}},tsunami:{id:"tsunami",name:"Tsunami",nameEs:"Tsunami",icon:"üåä",color:a.mist,severityLabels:{1:"Vigilancia",2:"Aviso",3:"Alerta",4:"Alerta M√°xima"}},volcano:{id:"volcano",name:"Volcanic Eruption",nameEs:"Erupci√≥n Volc√°nica",icon:"üåã",color:a.sakura,severityLabels:{1:"Verde",2:"Amarillo",3:"Naranja",4:"Rojo"}},wildfire:{id:"wildfire",name:"Wildfire",nameEs:"Incendio Forestal",icon:"üî•",color:a.plasma,severityLabels:{1:"Controlado",2:"Activo",3:"Fuera de Control",4:"Catastr√≥fico"}},flood:{id:"flood",name:"Flood",nameEs:"Inundaci√≥n",icon:"üíß",color:a.mist,severityLabels:{1:"Menor",2:"Moderada",3:"Severa",4:"Catastr√≥fica"}},storm:{id:"storm",name:"Storm/Hurricane",nameEs:"Tormenta/Hurac√°n",icon:"üåÄ",color:a.smoke,severityLabels:{1:"Tormenta Tropical",2:"Categor√≠a 1-2",3:"Categor√≠a 3-4",4:"Categor√≠a 5"}},landslide:{id:"landslide",name:"Landslide",nameEs:"Aluvi√≥n/Deslizamiento",icon:"‚õ∞Ô∏è",color:a.smoke,severityLabels:{1:"Menor",2:"Moderado",3:"Severo",4:"Catastr√≥fico"}}};e.s(["BRAND_COLORS",0,a,"DISASTER_CONFIGS",0,r,"DISASTER_TYPES",0,["earthquake","tsunami","volcano","wildfire","flood","storm","landslide"]])},72881,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(70703),t=e.i(58594);function n({onMyLocation:e,onToggleZones:s,showZones:t=!0,onFilterChange:n}){let[i,l]=(0,r.useState)(!1),o="w-9 h-9 bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg flex items-center justify-center text-sm hover:bg-[#4A5060]/30 hover:border-[#7088A0] transition-colors";return(0,a.jsxs)("div",{className:"absolute top-3 right-3 z-[1000] space-y-2",children:[(0,a.jsx)("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>e?.(),e=>console.error("Error getting location:",e))},className:o,title:"Mi ubicaci√≥n",children:"üìç"}),s&&(0,a.jsx)("button",{onClick:s,className:`${o} ${t?"bg-[#D4B57A]/20 border-[#D4B57A]/50 text-[#D4B57A]":""}`,title:t?"Ocultar zonas":"Mostrar zonas",children:"üè†"}),(0,a.jsx)("button",{onClick:()=>l(!i),className:o,title:"Leyenda",children:"‚ÑπÔ∏è"}),i&&(0,a.jsxs)("div",{className:"bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg p-3 shadow-xl min-w-[140px]",children:[(0,a.jsx)("h4",{className:"font-medium text-xs text-[#E8E8F0] mb-2",children:"Severidad"}),(0,a.jsxs)("div",{className:"space-y-1.5 text-xs text-[#8890A0]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#F87171]"}),(0,a.jsx)("span",{children:"Cr√≠tica"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#D4B57A]"}),(0,a.jsx)("span",{children:"Alta"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FBBF24]"}),(0,a.jsx)("span",{children:"Media"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#4ADE80]"}),(0,a.jsx)("span",{children:"Baja"})]})]})]})]})}let i=(0,s.default)(()=>e.A(52169).then(e=>e.MapContainer),{loadableGenerated:{modules:[94970]},ssr:!1,loading:()=>(0,a.jsx)(t.LoadingSpinner,{text:"Cargando mapa..."})}),l=(0,s.default)(()=>e.A(52169).then(e=>e.TileLayer),{loadableGenerated:{modules:[94970]},ssr:!1}),o=(0,s.default)(()=>e.A(25e3).then(e=>({default:e.EventMarker})),{loadableGenerated:{modules:[94735]},ssr:!1}),d=(0,s.default)(()=>e.A(43144).then(e=>({default:e.ZoneCircle})),{loadableGenerated:{modules:[35692]},ssr:!1}),c=(0,s.default)(()=>e.A(85985).then(e=>({default:e.MapController})),{loadableGenerated:{modules:[91757]},ssr:!1});function u({events:e,selectedEvent:s,userZones:u=[],center:m=[-33.45,-70.65],zoom:x=5,height:h="400px",showControls:f=!0,showZones:j=!0,onEventClick:p,onZoneClick:b,onMyLocation:g,onToggleZones:v,onFilterChange:N,className:y=""}){let[C,E]=(0,r.useState)(!1),[A,w]=(0,r.useState)(j);return((0,r.useEffect)(()=>{E(!0)},[]),C)?(0,a.jsxs)("div",{className:`w-full h-full ${y}`,children:[(0,a.jsxs)(i,{center:m,zoom:x,style:{height:"100%",width:"100%"},zoomControl:!1,children:[(0,a.jsx)(c,{selectedEvent:s}),(0,a.jsx)(l,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'¬© <a href="https://carto.com/">CARTO</a>'}),A&&u.map(e=>(0,a.jsx)(d,{zone:e,onClick:b},`zone-${e.id}`)),e.map(e=>(0,a.jsx)(o,{event:e,onClick:p},`event-${e.id}`))]}),f&&(0,a.jsx)(n,{onMyLocation:g,onToggleZones:()=>{w(!A),v?.()},showZones:A,onFilterChange:N})]}):(0,a.jsx)("div",{className:`bg-surface border border-border rounded-lg flex items-center justify-center ${y}`,style:{height:h},children:(0,a.jsx)(t.LoadingSpinner,{text:"Cargando mapa..."})})}e.s(["DisasterMap",()=>u],72881)},3374,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(22016),t=e.i(57688),n=e.i(18566),i=e.i(54579),l=e.i(13741),o=e.i(52366);function d(){let{user:e}=(0,i.useAuth)(),d=(0,n.usePathname)(),[c,u]=(0,r.useState)(!1),m=[{href:"/",label:"Mapa",requiresAuth:!1},{href:"/dashboard",label:"Panel",requiresAuth:!0},{href:"/settings",label:"Config",requiresAuth:!0}].filter(a=>!a.requiresAuth||e);return(0,a.jsxs)("header",{className:"sticky top-0 z-50 w-full border-b border-[#4A5060]/30 bg-[#0D0E14]/90 backdrop-blur-md",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex h-16 items-center justify-between px-4",children:[(0,a.jsxs)(s.default,{href:"/",className:"flex items-center gap-2 group",children:[(0,a.jsx)("div",{className:"relative w-9 h-9 transition-transform group-hover:scale-105",children:(0,a.jsx)(t.default,{src:"/logo.svg",alt:"Sentinel Logo",fill:!0,className:"object-contain drop-shadow-[0_0_10px_rgba(212,181,122,0.3)]"})}),(0,a.jsx)("span",{className:"font-semibold text-[#D4B57A] tracking-wider hidden sm:block",children:"SENTINEL"})]}),(0,a.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:m.map(e=>(0,a.jsx)(s.default,{href:e.href,className:`px-3 py-1.5 rounded-md text-sm transition-colors ${d===e.href?"bg-[#D4B57A]/10 text-[#D4B57A]":"text-[#8890A0] hover:text-[#E8E8F0] hover:bg-[#1A1B22]"}`,children:e.label},e.href))}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e?(0,a.jsx)(o.UserMenu,{}):(0,a.jsx)(l.LoginButton,{}),(0,a.jsx)("button",{onClick:()=>u(!c),className:"md:hidden p-2 text-[#8890A0] hover:text-[#E8E8F0]","aria-label":"Menu",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),c&&(0,a.jsx)("nav",{className:"md:hidden border-t border-[#4A5060]/30 bg-[#0D0E14] p-4 space-y-1",children:m.map(e=>(0,a.jsx)(s.default,{href:e.href,onClick:()=>u(!1),className:`block px-3 py-2 rounded-md text-sm ${d===e.href?"bg-[#D4B57A]/10 text-[#D4B57A]":"text-[#8890A0] hover:text-[#E8E8F0]"}`,children:e.label},e.href))})]})}e.s(["Header",()=>d])},58594,e=>{"use strict";var a=e.i(43476);function r({size:e="md",className:r=""}){return(0,a.jsx)("div",{className:`${{sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-8 h-8 border-3"}[e]} border-[#D4B57A] border-t-transparent rounded-full animate-spin ${r}`})}function s({text:e}){return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 py-8",children:[(0,a.jsx)(r,{size:"lg"}),e&&(0,a.jsx)("p",{className:"text-[#8890A0] text-sm",children:e})]})}e.s(["LoadingSpinner",()=>s])},18566,(e,a,r)=>{a.exports=e.r(76562)},58709,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(18566),t=e.i(54579),n=e.i(58594);function i({children:e,redirectTo:i="/login",requireAuth:l=!0}){let{user:o,loading:d}=(0,t.useAuth)(),c=(0,s.useRouter)();return((0,r.useEffect)(()=>{d||(l&&!o?c.push(i):!l&&o&&c.push("/dashboard"))},[o,d,l,i,c]),d)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(n.LoadingSpinner,{text:"Verificando sesi√≥n..."})}):l&&!o||!l&&o?null:(0,a.jsx)(a.Fragment,{children:e})}e.s(["AuthGuard",()=>i])},96640,e=>{"use strict";var a=e.i(43476),r=e.i(91285);function s({className:e,variant:s="plasma",...t}){return(0,a.jsx)("span",{className:(0,r.cn)("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border",{plasma:"bg-[#D4B57A]/15 text-[#D4B57A] border-[#D4B57A]/30",mist:"bg-[#7088A0]/15 text-[#7088A0] border-[#7088A0]/30",success:"bg-[#4ADE80]/15 text-[#4ADE80] border-[#4ADE80]/30",warning:"bg-[#FBBF24]/15 text-[#FBBF24] border-[#FBBF24]/30",danger:"bg-[#F87171]/15 text-[#F87171] border-[#F87171]/30",secondary:"bg-[#4A5060]/30 text-[#8890A0] border-[#4A5060]/40"}[s],e),...t})}e.s(["Badge",()=>s])},39313,e=>{"use strict";var a=e.i(71645),r=e.i(54579),s=e.i(28623);function t(){let{user:e}=(0,r.useAuth)(),[t,n]=(0,a.useState)([]),[i,l]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null),c=e?.uid,u=(0,a.useCallback)(async()=>{if(!c)return void n([]);try{l(!0),d(null);let e=await (0,s.getUserZones)(c);n(e)}catch(e){console.error("Error loading zones:",e),d("Error al cargar zonas")}finally{l(!1)}},[c]);(0,a.useEffect)(()=>{u()},[u]);let m=(0,a.useCallback)(async e=>{if(!c)throw Error("Usuario no autenticado");try{d(null);let a=await (0,s.addUserZone)(c,e);return await u(),a}catch(e){throw console.error("Error creating zone:",e),d("Error al crear zona"),e}},[c,u]),x=(0,a.useCallback)(async(e,a)=>{if(!c)throw Error("Usuario no autenticado");try{d(null),await (0,s.updateUserZone)(c,e,a),await u()}catch(e){throw console.error("Error updating zone:",e),d("Error al actualizar zona"),e}},[c,u]),h=(0,a.useCallback)(async e=>{if(!c)throw Error("Usuario no autenticado");try{d(null),await (0,s.deleteUserZone)(c,e),await u()}catch(e){throw console.error("Error deleting zone:",e),d("Error al eliminar zona"),e}},[c,u]),f=(0,a.useCallback)(async(e,a)=>x(e,{isActive:a}),[x]),j=t.filter(e=>e.isActive),p=(0,a.useCallback)((e,a,r=0)=>j.some(s=>{var t,n,i,l;let o,d,c;return t=e,n=a,i=s.location.lat,l=s.location.lng,2*Math.atan2(Math.sqrt(c=Math.sin((o=(t-i)*Math.PI/180)/2)*Math.sin(o/2)+Math.cos(i*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin((d=(n-l)*Math.PI/180)/2)*Math.sin(d/2)),Math.sqrt(1-c))*6371<=s.radiusKm+r}),[j]);return{zones:t,activeZones:j,loading:i,error:o,createZone:m,updateZone:x,removeZone:h,toggleZone:f,refresh:u,isLocationInUserZones:p}}e.s(["useUserZones",()=>t])},66579,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(54579),t=e.i(39313),n=e.i(72881),i=e.i(59544),l=e.i(91285);let o=(0,r.forwardRef)(({isOpen:e,onClose:s,children:t,className:n},i)=>((0,r.useEffect)(()=>{let a=e=>{"Escape"===e.key&&s()};return e&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[e,s]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,a.jsx)("div",{ref:i,className:(0,l.cn)("relative z-10 max-h-[90vh] max-w-[90vw] overflow-auto rounded-lg bg-surface p-6 shadow-xl",n),onClick:e=>e.stopPropagation(),children:t})]}):null);o.displayName="Modal";let d=(0,r.forwardRef)(({children:e,className:r},s)=>(0,a.jsx)("div",{ref:s,className:(0,l.cn)("mb-4 flex items-center justify-between",r),children:e}));d.displayName="ModalHeader";let c=(0,r.forwardRef)(({children:e,className:r},s)=>(0,a.jsx)("h2",{ref:s,className:(0,l.cn)("text-lg font-semibold text-foreground",r),children:e}));c.displayName="ModalTitle";let u=(0,r.forwardRef)(({onClick:e,className:r},s)=>(0,a.jsx)("button",{ref:s,onClick:e,className:(0,l.cn)("rounded-full p-1 text-foreground hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary-500",r),"aria-label":"Cerrar modal",children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}));u.displayName="ModalCloseButton";var m=e.i(39964),x=e.i(58594);function h({initialData:e,onSubmit:s,onCancel:t,title:l}){let[o,h]=(0,r.useState)({name:e?.name||"",radiusKm:e?.radiusKm||50,location:e?.location||{lat:-33.45,lng:-70.65}}),[f,j]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),N=(e,a)=>{let r=parseFloat(e),s=parseFloat(a);isNaN(r)||isNaN(s)||h(e=>({...e,location:{lat:r,lng:s}}))},y=async a=>{if(a.preventDefault(),!o.name.trim())return void alert("Por favor ingresa un nombre para la zona");if(o.radiusKm<1||o.radiusKm>500)return void alert("El radio debe estar entre 1 y 500 km");try{j(!0),await s({name:o.name.trim(),location:o.location,geohash:"",radiusKm:o.radiusKm,isActive:e?.isActive??!0})}catch(e){console.error("Error submitting form:",e)}finally{j(!1)}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{children:l}),(0,a.jsx)(u,{onClick:t})]}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,a.jsxs)(m.Card,{children:[(0,a.jsxs)(m.CardHeader,{children:[(0,a.jsx)(m.CardTitle,{className:"text-lg",children:"Informaci√≥n B√°sica"}),(0,a.jsx)(m.CardDescription,{children:"Configura el nombre y radio de la zona"})]}),(0,a.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Nombre de la zona *"}),(0,a.jsx)("input",{type:"text",value:o.name,onChange:e=>h(a=>({...a,name:e.target.value})),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej: Mi casa, Trabajo, Ciudad...",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Radio de alerta (km) *"}),(0,a.jsx)("input",{type:"number",min:"1",max:"500",value:o.radiusKm,onChange:e=>h(a=>({...a,radiusKm:parseInt(e.target.value)||50})),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Recibir√°s alertas cuando eventos ocurran dentro de este radio"})]})]})]}),(0,a.jsxs)(m.Card,{children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.CardTitle,{className:"text-lg",children:"Ubicaci√≥n"}),(0,a.jsx)(m.CardDescription,{children:"Selecciona el centro de la zona en el mapa"})]}),(0,a.jsx)(i.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{if(b(!0),v(null),!navigator.geolocation){v("La geolocalizaci√≥n no est√° soportada por este navegador"),b(!1);return}navigator.geolocation.getCurrentPosition(e=>{let{latitude:a,longitude:r}=e.coords;h(e=>({...e,location:{lat:a,lng:r}})),b(!1)},e=>{console.error("Error getting location:",e);let a="Error al obtener la ubicaci√≥n";switch(e.code){case e.PERMISSION_DENIED:a="Permiso de ubicaci√≥n denegado";break;case e.POSITION_UNAVAILABLE:a="Ubicaci√≥n no disponible";break;case e.TIMEOUT:a="Tiempo de espera agotado"}v(a),b(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},disabled:p,children:p?(0,a.jsx)(x.LoadingSpinner,{}):"üìç Mi ubicaci√≥n"})]})}),(0,a.jsx)(m.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[g&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Latitud"}),(0,a.jsx)("input",{type:"number",step:"0.000001",value:o.location.lat,onChange:e=>N(e.target.value,o.location.lng.toString()),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"-33.456789"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Longitud"}),(0,a.jsx)("input",{type:"number",step:"0.000001",value:o.location.lng,onChange:e=>N(o.location.lat.toString(),e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"-70.678901"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["üìç Ubicaci√≥n actual: ",o.location.lat.toFixed(6),", ",o.location.lng.toFixed(6)]}),(0,a.jsx)("div",{className:"h-64 rounded-lg overflow-hidden border",children:(0,a.jsx)(n.DisasterMap,{events:[],center:[o.location.lat,o.location.lng],zoom:12,onEventClick:()=>{},onZoneClick:()=>{}})}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:'üí° Puedes ajustar las coordenadas manualmente o usar "Mi ubicaci√≥n" para centrar el mapa en tu posici√≥n actual'})]})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,a.jsx)(i.Button,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),(0,a.jsxs)(i.Button,{type:"submit",disabled:f,className:"flex-1",children:[f?(0,a.jsx)(x.LoadingSpinner,{}):null,e?"Actualizar Zona":"Crear Zona"]})]})]})]})}var f=e.i(96640);function j({zone:e,onEdit:r,onDelete:s,onToggle:t,className:n=""}){let l;return(0,a.jsx)(m.Card,{className:`${e.isActive?"border-primary-500 bg-primary-50/50":""} ${n}`,children:(0,a.jsx)(m.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,a.jsx)(f.Badge,{variant:e.isActive?"success":"secondary",children:e.isActive?"Activa":"Inactiva"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"üìè Radio:"})," ",e.radiusKm," km"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"üìÖ Creada:"})," ",(l=e.createdAt,new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"short",year:"numeric"}).format(l))]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"üìç Ubicaci√≥n:"})," ",e.location.lat.toFixed(4),", ",e.location.lng.toFixed(4)]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)(i.Button,{size:"sm",variant:e.isActive?"plasma":"outline",onClick:t,className:"min-w-[80px]",children:e.isActive?"Desactivar":"Activar"}),(0,a.jsx)(i.Button,{size:"sm",variant:"outline",onClick:r,children:"‚úèÔ∏è Editar"}),(0,a.jsx)(i.Button,{size:"sm",variant:"outline",onClick:s,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"üóëÔ∏è Eliminar"})]})]})})})}function p({className:e=""}){let{user:n}=(0,s.useAuth)(),{zones:l,loading:d,error:c,createZone:u,updateZone:f,removeZone:p,toggleZone:b}=(0,t.useUserZones)(),[g,v]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),C=async e=>{try{await u(e),v(!1)}catch(e){console.error("Error creating zone:",e)}},E=async e=>{if(N)try{await f(N.id,e),y(null)}catch(e){console.error("Error updating zone:",e)}},A=async e=>{if(confirm("¬øEst√°s seguro de que quieres eliminar esta zona?"))try{await p(e)}catch(e){console.error("Error deleting zone:",e)}};return n?(0,a.jsxs)("div",{className:e,children:[(0,a.jsxs)(m.Card,{children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.CardTitle,{children:"Mis Zonas de Monitoreo"}),(0,a.jsx)(m.CardDescription,{children:"Configura las √°reas geogr√°ficas donde quieres recibir alertas"})]}),(0,a.jsx)(i.Button,{onClick:()=>v(!0),children:"‚ûï Agregar Zona"})]})}),(0,a.jsx)(m.CardContent,{children:d?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)(x.LoadingSpinner,{text:"Cargando zonas..."})}):c?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-red-500 mb-2",children:"‚ö†Ô∏è Error al cargar zonas"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:c}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>window.location.reload(),children:"Reintentar"})]}):0===l.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"üó∫Ô∏è"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No tienes zonas configuradas"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Crea tu primera zona para empezar a recibir alertas personalizadas"}),(0,a.jsx)(i.Button,{onClick:()=>v(!0),children:"Crear Primera Zona"})]}):(0,a.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,a.jsx)(j,{zone:e,onEdit:()=>y(e),onDelete:()=>A(e.id),onToggle:()=>b(e.id,!e.isActive)},e.id))})})]}),(0,a.jsx)(o,{isOpen:g,onClose:()=>v(!1),children:(0,a.jsx)(h,{onSubmit:C,onCancel:()=>v(!1),title:"Crear Nueva Zona"})}),(0,a.jsx)(o,{isOpen:!!N,onClose:()=>y(null),children:N&&(0,a.jsx)(h,{initialData:N,onSubmit:E,onCancel:()=>y(null),title:"Editar Zona"})})]}):(0,a.jsx)(m.Card,{className:e,children:(0,a.jsx)(m.CardContent,{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Debes iniciar sesi√≥n para gestionar tus zonas"})})})}e.s(["ZoneManager",()=>p],66579)},45123,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(54579),t=e.i(37772),n=e.i(39964),i=e.i(59544),l=e.i(96640),o=e.i(58594);function d({className:e=""}){let{user:d}=(0,s.useAuth)(),[c,u]=(0,r.useState)({}),[m,x]=(0,r.useState)(!0),[h,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(d?.uid)try{x(!0);let e={};t.DISASTER_TYPES.forEach(a=>{e[a]={disasterType:a,minSeverity:1,pushEnabled:!0,emailEnabled:!1}}),u(e)}catch(e){console.error("Error loading preferences:",e)}finally{x(!1)}})()},[d?.uid]);let j=async(e,a,r)=>{try{f(e),u(s=>({...s,[e]:{...s[e],[a]:r}})),await new Promise(e=>setTimeout(e,500))}catch(e){console.error("Error updating preference:",e)}finally{f(null)}};return d?m?(0,a.jsx)(n.Card,{className:e,children:(0,a.jsx)(n.CardContent,{className:"text-center py-8",children:(0,a.jsx)(o.LoadingSpinner,{text:"Cargando preferencias..."})})}):(0,a.jsxs)(n.Card,{className:e,children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.CardTitle,{children:"Preferencias de Alertas"}),(0,a.jsx)(n.CardDescription,{children:"Configura qu√© tipos de desastres quieres monitorear y c√≥mo recibir las alertas"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{t.DISASTER_TYPES.forEach(e=>{c[e]?.pushEnabled||j(e,"pushEnabled",!0)})},children:"Activar Todas"}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{t.DISASTER_TYPES.forEach(e=>{c[e]?.pushEnabled&&j(e,"pushEnabled",!1)})},children:"Desactivar Todas"})]})]})}),(0,a.jsxs)(n.CardContent,{children:[(0,a.jsx)("div",{className:"space-y-4",children:t.DISASTER_TYPES.map(e=>{let r=t.DISASTER_CONFIGS[e],s=c[e],n=h===e;return s?(0,a.jsxs)("div",{className:"border border-border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("span",{className:"text-2xl",children:r.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold",children:r.nameEs}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:r.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Severidad m√≠n."}),(0,a.jsx)("select",{value:s.minSeverity,onChange:a=>j(e,"minSeverity",parseInt(a.target.value)),disabled:n,className:"text-sm border border-border rounded px-2 py-1 disabled:opacity-50",children:[1,2,3,4].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Push"}),(0,a.jsx)("input",{type:"checkbox",checked:s.pushEnabled,onChange:a=>j(e,"pushEnabled",!s.pushEnabled),disabled:n,className:"w-4 h-4 text-primary-600 border-border rounded focus:ring-primary-500"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Email"}),(0,a.jsx)("input",{type:"checkbox",checked:s.emailEnabled,onChange:a=>j(e,"emailEnabled",!s.emailEnabled),disabled:n,className:"w-4 h-4 text-primary-600 border-border rounded focus:ring-primary-500"})]}),(0,a.jsx)("div",{className:"text-right",children:n?(0,a.jsx)(o.LoadingSpinner,{}):(0,a.jsx)(l.Badge,{variant:s.pushEnabled?"success":"secondary",children:s.pushEnabled?"Activo":"Inactivo"})})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:"Niveles de severidad:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:Object.entries(r.severityLabels).map(([e,r])=>(0,a.jsx)(l.Badge,{variant:parseInt(e)>=s.minSeverity?"plasma":"secondary",className:"text-xs",children:r},e))})]})]},e):null})}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"üí° Consejos"}),(0,a.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,a.jsxs)("li",{children:["‚Ä¢ ",(0,a.jsx)("strong",{children:"Severidad m√≠nima:"})," Solo recibir√°s alertas para eventos de esta severidad o superior"]}),(0,a.jsxs)("li",{children:["‚Ä¢ ",(0,a.jsx)("strong",{children:"Notificaciones push:"})," Alertas en tiempo real en tu dispositivo"]}),(0,a.jsxs)("li",{children:["‚Ä¢ ",(0,a.jsx)("strong",{children:"Notificaciones email:"})," Res√∫menes diarios por correo electr√≥nico"]}),(0,a.jsx)("li",{children:"‚Ä¢ Puedes ajustar estas preferencias en cualquier momento"})]})]})]})]}):(0,a.jsx)(n.Card,{className:e,children:(0,a.jsx)(n.CardContent,{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Debes iniciar sesi√≥n para gestionar tus preferencias de alertas"})})})}e.s(["AlertPreferences",()=>d])},1988,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(54579),t=e.i(39964),n=e.i(59544);e.i(36180);var i=e.i(98925),l=e.i(14985);function o(){let{user:e}=(0,s.useAuth)(),[o,d]=(0,r.useState)(!1),c=async(a,r)=>{if(e){d(!0);try{let s=(0,i.doc)(l.db,"users",e.uid);await (0,i.updateDoc)(s,{[`settings.${a}`]:r})}catch(e){console.error("Error updating setting:",e)}finally{d(!1)}}},u=e?.settings||{language:"es",darkMode:!0,soundEnabled:!0};return(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{children:[(0,a.jsx)(t.CardTitle,{className:"flex items-center gap-2",children:"‚öôÔ∏è Configuraci√≥n General"}),(0,a.jsx)(t.CardDescription,{children:"Ajustes generales de la aplicaci√≥n"})]}),(0,a.jsx)(t.CardContent,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Idioma"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Button,{variant:"es"===u.language?void 0:"outline",size:"sm",onClick:()=>c("language","es"),disabled:o,children:"Es"}),(0,a.jsx)(n.Button,{variant:"en"===u.language?void 0:"outline",size:"sm",onClick:()=>c("language","en"),disabled:o,children:"En"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Sonido"}),(0,a.jsx)(n.Button,{variant:u.soundEnabled?void 0:"outline",size:"sm",onClick:()=>c("soundEnabled",!u.soundEnabled),disabled:o,children:u.soundEnabled?"Activado":"Desactivado"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Modo Oscuro"}),(0,a.jsx)(n.Button,{variant:u.darkMode?void 0:"outline",size:"sm",onClick:()=>c("darkMode",!u.darkMode),disabled:o,children:u.darkMode?"On":"Off"})]})]})})]})}e.s(["GeneralSettings",()=>o])},14204,e=>{"use strict";var a=e.i(43476),r=e.i(54579),s=e.i(39964),t=e.i(59544),n=e.i(71645);function i(){let e,{user:i,logout:l}=(0,r.useAuth)(),[o,d]=(0,n.useState)(!1);if(!i)return null;let c=async()=>{confirm("¬øEst√°s seguro de que quieres eliminar tu cuenta? Esta acci√≥n no se puede deshacer.")&&(d(!0),alert("Funcionalidad de eliminar cuenta pendiente de implementaci√≥n segura"),d(!1))};return(0,a.jsxs)(s.Card,{children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsx)(s.CardTitle,{className:"flex items-center gap-2",children:"üë§ Cuenta"}),(0,a.jsx)(s.CardDescription,{children:"Informaci√≥n de tu cuenta de usuario"})]}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Email"}),(0,a.jsx)("div",{className:"font-medium",children:i.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Nombre"}),(0,a.jsx)("div",{className:"font-medium",children:i.displayName||"No especificado"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Miembro desde"}),(0,a.jsx)("div",{className:"font-medium",children:i.createdAt?(e=i.createdAt,new Intl.DateTimeFormat("es-ES",{month:"long",year:"numeric"}).format(new Date(e))):"Desconocido"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID de Usuario"}),(0,a.jsx)("div",{className:"font-mono text-xs text-muted-foreground",children:i.uid})]})]}),(0,a.jsx)("div",{className:"border-t pt-4 space-y-2",children:(0,a.jsx)(t.Button,{variant:"outline",size:"sm",className:"w-full text-red-600 hover:text-red-700 hover:bg-red-50",onClick:c,disabled:o,children:"Eliminar Cuenta"})})]})]})}e.s(["AccountSettings",()=>i])},52169,e=>{e.v(a=>Promise.all(["static/chunks/374deb93b1e6b138.js","static/chunks/1442f9ddf5556540.js"].map(a=>e.l(a))).then(()=>a(94970)))},25e3,e=>{e.v(a=>Promise.all(["static/chunks/9fa7c84b99df7249.js","static/chunks/1442f9ddf5556540.js"].map(a=>e.l(a))).then(()=>a(94735)))},43144,e=>{e.v(a=>Promise.all(["static/chunks/182f490ad391f383.js"].map(a=>e.l(a))).then(()=>a(35692)))},85985,e=>{e.v(a=>Promise.all(["static/chunks/4a442df3a10d5024.js"].map(a=>e.l(a))).then(()=>a(91757)))}]);