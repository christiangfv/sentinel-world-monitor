(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},96640,e=>{"use strict";var t=e.i(43476),r=e.i(91285);function n({className:e,variant:n="plasma",...s}){return(0,t.jsx)("span",{className:(0,r.cn)("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border",{plasma:"bg-[#D4B57A]/15 text-[#D4B57A] border-[#D4B57A]/30",mist:"bg-[#7088A0]/15 text-[#7088A0] border-[#7088A0]/30",success:"bg-[#4ADE80]/15 text-[#4ADE80] border-[#4ADE80]/30",warning:"bg-[#FBBF24]/15 text-[#FBBF24] border-[#FBBF24]/30",danger:"bg-[#F87171]/15 text-[#F87171] border-[#F87171]/30",secondary:"bg-[#4A5060]/30 text-[#8890A0] border-[#4A5060]/40"}[n],e),...s})}e.s(["Badge",()=>n])},58709,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(18566),s=e.i(54579),a=e.i(58594);function i({children:e,redirectTo:i="/login",requireAuth:o=!0}){let{user:l,loading:c}=(0,s.useAuth)(),d=(0,n.useRouter)();return((0,r.useEffect)(()=>{c||(o&&!l?d.push(i):!o&&l&&d.push("/dashboard"))},[l,c,o,i,d]),c)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(a.LoadingSpinner,{text:"Verificando sesi√≥n..."})}):o&&!l||!o&&l?null:(0,t.jsx)(t.Fragment,{children:e})}e.s(["AuthGuard",()=>i])},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let n=e.r(32061);function s({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return n}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return l}});let n=e.r(43476),s=e.r(74080),a=e.r(63599),i=e.r(9885),o=e.r(43369);function l({moduleIds:e}){if("undefined"!=typeof window)return null;let t=a.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let n=t.reactLoadableManifest;for(let t of e){if(!n[t])continue;let e=n[t].files;r.push(...e)}}if(0===r.length)return null;let l=(0,o.getDeploymentIdQueryOrEmptyString)();return(0,n.jsx)(n.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}${l}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return c}});let n=e.r(43476),s=e.r(71645),a=e.r(67585),i=e.r(52157);function o(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},r=(0,s.lazy)(()=>t.loader().then(o)),c=t.loading;function d(e){let o=c?(0,n.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,d=l?s.Suspense:s.Fragment,u=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(i.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(d,{...l?{fallback:o}:{},children:u})}return d.displayName="LoadableComponent",d}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let n=e.r(55682)._(e.r(69093));function s(e,t){let r={};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,n.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},37772,e=>{"use strict";let t={abyss:"#0D0E14",shadow:"#1A1B22",plasma:"#D4B57A",mist:"#7088A0",sakura:"#A07888",smoke:"#8890A0",muted:"#E8E8F0"},r={earthquake:{id:"earthquake",name:"Earthquake",nameEs:"Sismo",icon:"üåç",color:t.plasma,severityLabels:{1:"Menor (< 4.0)",2:"Leve (4.0 - 5.0)",3:"Moderado (5.0 - 6.0)",4:"Severo (> 6.0)"}},tsunami:{id:"tsunami",name:"Tsunami",nameEs:"Tsunami",icon:"üåä",color:t.mist,severityLabels:{1:"Vigilancia",2:"Aviso",3:"Alerta",4:"Alerta M√°xima"}},volcano:{id:"volcano",name:"Volcanic Eruption",nameEs:"Erupci√≥n Volc√°nica",icon:"üåã",color:t.sakura,severityLabels:{1:"Verde",2:"Amarillo",3:"Naranja",4:"Rojo"}},wildfire:{id:"wildfire",name:"Wildfire",nameEs:"Incendio Forestal",icon:"üî•",color:t.plasma,severityLabels:{1:"Controlado",2:"Activo",3:"Fuera de Control",4:"Catastr√≥fico"}},flood:{id:"flood",name:"Flood",nameEs:"Inundaci√≥n",icon:"üíß",color:t.mist,severityLabels:{1:"Menor",2:"Moderada",3:"Severa",4:"Catastr√≥fica"}},storm:{id:"storm",name:"Storm/Hurricane",nameEs:"Tormenta/Hurac√°n",icon:"üåÄ",color:t.smoke,severityLabels:{1:"Tormenta Tropical",2:"Categor√≠a 1-2",3:"Categor√≠a 3-4",4:"Categor√≠a 5"}},landslide:{id:"landslide",name:"Landslide",nameEs:"Aluvi√≥n/Deslizamiento",icon:"‚õ∞Ô∏è",color:t.smoke,severityLabels:{1:"Menor",2:"Moderado",3:"Severo",4:"Catastr√≥fico"}}};e.s(["BRAND_COLORS",0,t,"DISASTER_CONFIGS",0,r,"DISASTER_TYPES",0,["earthquake","tsunami","volcano","wildfire","flood","storm","landslide"]])},28623,e=>{"use strict";e.i(36180);var t=e.i(98925),r=e.i(14985);async function n(e={disasterTypes:[],minSeverity:1}){try{let n=[];e.disasterTypes&&e.disasterTypes.length>0&&n.push((0,t.where)("disasterType","in",e.disasterTypes)),e.minSeverity&&e.minSeverity>1&&n.push((0,t.where)("severity",">=",e.minSeverity)),n.push((0,t.orderBy)("eventTime","desc")),n.push((0,t.limit)(100));let s=(0,t.query)((0,t.collection)(r.db,"events"),...n);return(await (0,t.getDocs)(s)).docs.map(e=>{let t=e.data(),r=t.location,n=r?.latitude??r?.lat,s=r?.longitude??r?.lng;return{id:e.id,...t,location:{lat:n,lng:s},eventTime:t.eventTime.toDate(),expiresAt:t.expiresAt?.toDate(),createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()}})}catch(e){throw console.error("Error getting events:",e),Error("Error al obtener eventos")}}async function s(e){try{let n=(0,t.doc)(r.db,"events",e),s=await (0,t.getDoc)(n);if(s.exists()){let e=s.data(),t=e.location,r=t?.latitude??t?.lat,n=t?.longitude??t?.lng;return{id:s.id,...e,location:{lat:r,lng:n},eventTime:e.eventTime.toDate(),expiresAt:e.expiresAt?.toDate(),createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(e){return console.error("Error getting event:",e),null}}function a(e,n={disasterTypes:[],minSeverity:1}){let s=[];n.disasterTypes&&n.disasterTypes.length>0&&s.push((0,t.where)("disasterType","in",n.disasterTypes)),n.minSeverity&&n.minSeverity>1&&s.push((0,t.where)("severity",">=",n.minSeverity)),s.push((0,t.orderBy)("eventTime","desc")),s.push((0,t.limit)(50));let i=(0,t.query)((0,t.collection)(r.db,"events"),...s);return(0,t.onSnapshot)(i,t=>{e(t.docs.map(e=>{let t=e.data(),r=t.location,n=r?.latitude??r?.lat,s=r?.longitude??r?.lng;return{id:e.id,...t,location:{lat:n,lng:s},eventTime:t.eventTime.toDate(),expiresAt:t.expiresAt?.toDate(),createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()}}))},e=>{console.error("Error subscribing to events:",e)})}async function i(e){try{let n=(0,t.query)((0,t.collection)(r.db,"users",e,"zones"),(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(n)).docs.map(t=>{let r=t.data();return{id:t.id,userId:e,...r,location:{lat:r.location.latitude,lng:r.location.longitude},createdAt:r.createdAt.toDate()}})}catch(e){throw console.error("Error getting user zones:",e),Error("Error al obtener zonas")}}async function o(e,n){try{return(await (0,t.addDoc)((0,t.collection)(r.db,"users",e,"zones"),{...n,location:new t.GeoPoint(n.location.lat,n.location.lng),createdAt:t.Timestamp.now()})).id}catch(e){throw console.error("Error adding zone:",e),Error("Error al agregar zona")}}async function l(e,n,s){try{let a={...s};s.location&&(a.location=new t.GeoPoint(s.location.lat,s.location.lng)),await (0,t.updateDoc)((0,t.doc)(r.db,"users",e,"zones",n),a)}catch(e){throw console.error("Error updating zone:",e),Error("Error al actualizar zona")}}async function c(e,n){try{await (0,t.deleteDoc)((0,t.doc)(r.db,"users",e,"zones",n))}catch(e){throw console.error("Error deleting zone:",e),Error("Error al eliminar zona")}}e.s(["addUserZone",()=>o,"deleteUserZone",()=>c,"getEventById",()=>s,"getEvents",()=>n,"getUserZones",()=>i,"subscribeToEvents",()=>a,"updateUserZone",()=>l])},3374,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(22016),s=e.i(18566),a=e.i(54579),i=e.i(13741),o=e.i(52366),l=e.i(97211);function c(){let{user:e}=(0,a.useAuth)(),c=(0,s.usePathname)(),[d,u]=(0,r.useState)(!1),m=[{href:"/",label:"Mapa",requiresAuth:!1},{href:"/dashboard",label:"Panel",requiresAuth:!0},{href:"/settings",label:"Config",requiresAuth:!0}].filter(t=>!t.requiresAuth||e);return(0,t.jsxs)("header",{className:"sticky top-0 z-50 w-full border-b border-[#4A5060]/30 bg-[#0D0E14]/90 backdrop-blur-md",children:[(0,t.jsxs)("div",{className:"max-w-6xl mx-auto flex h-16 items-center justify-between px-4",children:[(0,t.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 group",children:[(0,t.jsx)("div",{className:"w-9 h-9 flex items-center justify-center transition-transform group-hover:scale-105",children:(0,t.jsx)(l.SentinelLogo,{size:36,className:"drop-shadow-[0_0_10px_rgba(212,181,122,0.3)]"})}),(0,t.jsx)("span",{className:"font-semibold text-[#D4B57A] tracking-wider hidden sm:block",children:"SENTINEL"})]}),(0,t.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:m.map(e=>(0,t.jsx)(n.default,{href:e.href,className:`px-3 py-1.5 rounded-md text-sm transition-colors ${c===e.href?"bg-[#D4B57A]/10 text-[#D4B57A]":"text-[#8890A0] hover:text-[#E8E8F0] hover:bg-[#1A1B22]"}`,children:e.label},e.href))}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e?(0,t.jsx)(o.UserMenu,{}):(0,t.jsx)(i.LoginButton,{}),(0,t.jsx)("button",{onClick:()=>u(!d),className:"md:hidden p-2 text-[#8890A0] hover:text-[#E8E8F0]","aria-label":"Menu",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d?(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),d&&(0,t.jsx)("nav",{className:"md:hidden border-t border-[#4A5060]/30 bg-[#0D0E14] p-4 space-y-1",children:m.map(e=>(0,t.jsx)(n.default,{href:e.href,onClick:()=>u(!1),className:`block px-3 py-2 rounded-md text-sm ${c===e.href?"bg-[#D4B57A]/10 text-[#D4B57A]":"text-[#8890A0] hover:text-[#E8E8F0]"}`,children:e.label},e.href))})]})}e.s(["Header",()=>c])},58594,e=>{"use strict";var t=e.i(43476);function r({size:e="md",className:r=""}){return(0,t.jsx)("div",{className:`${{sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-8 h-8 border-3"}[e]} border-[#D4B57A] border-t-transparent rounded-full animate-spin ${r}`})}function n({text:e}){return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 py-8",children:[(0,t.jsx)(r,{size:"lg"}),e&&(0,t.jsx)("p",{className:"text-[#8890A0] text-sm",children:e})]})}e.s(["LoadingSpinner",()=>n])},18566,(e,t,r)=>{t.exports=e.r(76562)},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return l},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return o}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});function a(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,i(e));else t.set(r,i(n));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return o},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(90809)._(e.r(98183)),i=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,n=e.protocol||"",s=e.pathname||"",o=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(a.urlQueryToSearchParams(l)));let d=e.search||l&&`?${l}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||i.test(n))&&!1!==c?(c="//"+(c||""),s&&"/"!==s[0]&&(s="/"+s)):c||(c=""),o&&"#"!==o[0]&&(o="#"+o),d&&"?"!==d[0]&&(d="?"+d),s=s.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${n}${c}${s}${d}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return o(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let n=e.r(71645);function s(e,t){let r=(0,n.useRef)(null),s=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=a(e,n)),t&&(s.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return b},NormalizeError:function(){return j},PageNotFoundError:function(){return y},SP:function(){return f},ST:function(){return p},WEB_VITALS:function(){return a},execOnce:function(){return i},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return l},isResSent:function(){return m},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return x},stringifyError:function(){return A}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function x(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&m(r))return n;if(!n)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let f="undefined"!=typeof performance,p=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class j extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function A(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let n=e.r(18967),s=e.r(52817);function a(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return g},useLinkStatus:function(){return y}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(90809),i=e.r(43476),o=a._(e.r(71645)),l=e.r(95057),c=e.r(8372),d=e.r(18581),u=e.r(18967),m=e.r(5550);e.r(33525);let x=e.r(91949),h=e.r(73668),f=e.r(9396);function p(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function g(t){var r;let n,s,a,[l,g]=(0,o.useOptimistic)(x.IDLE_LINK_STATUS),y=(0,o.useRef)(null),{href:b,as:v,children:A,prefetch:N=null,passHref:k,replace:w,shallow:E,scroll:C,onClick:S,onMouseEnter:B,onTouchStart:L,legacyBehavior:D=!1,onNavigate:P,ref:M,unstable_dynamicOnHover:T,..._}=t;n=A,D&&("string"==typeof n||"number"==typeof n)&&(n=(0,i.jsx)("a",{children:n}));let z=o.default.useContext(c.AppRouterContext),O=!1!==N,R=!1!==N?null===(r=N)||"auto"===r?f.FetchStrategy.PPR:f.FetchStrategy.Full:f.FetchStrategy.PPR,{href:F,as:I}=o.default.useMemo(()=>{let e=p(b);return{href:e,as:v?p(v):e}},[b,v]);if(D){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=o.default.Children.only(n)}let U=D?s&&"object"==typeof s&&s.ref:M,W=o.default.useCallback(e=>(null!==z&&(y.current=(0,x.mountLinkInstance)(e,F,z,R,O,g)),()=>{y.current&&((0,x.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,x.unmountPrefetchableInstance)(e)}),[O,F,z,R,g]),$={ref:(0,d.useMergedRef)(W,U),onClick(t){D||"function"!=typeof S||S(t),D&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!z||t.defaultPrevented||function(t,r,n,s,a,i,l){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);o.default.startTransition(()=>{u(n||r,a?"replace":"push",i??!0,s.current)})}}(t,F,I,y,w,C,P)},onMouseEnter(e){D||"function"!=typeof B||B(e),D&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),z&&O&&(0,x.onNavigationIntent)(e.currentTarget,!0===T)},onTouchStart:function(e){D||"function"!=typeof L||L(e),D&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),z&&O&&(0,x.onNavigationIntent)(e.currentTarget,!0===T)}};return(0,u.isAbsoluteUrl)(I)?$.href=I:D&&!k&&("a"!==s.type||"href"in s.props)||($.href=(0,m.addBasePath)(I)),a=D?o.default.cloneElement(s,$):(0,i.jsx)("a",{..._,...$,children:n}),(0,i.jsx)(j.Provider,{value:l,children:a})}e.r(84508);let j=(0,o.createContext)(x.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(j);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},59544,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(91285);let s=(0,r.forwardRef)(({className:e,variant:r="plasma",size:s="md",disabled:a,...i},o)=>(0,t.jsx)("button",{ref:o,disabled:a,className:(0,n.cn)("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",{plasma:"bg-gradient-to-r from-[#D4B57A] to-[#A8925A] text-[#0D0E14] hover:shadow-[0_0_20px_rgba(212,181,122,0.3)]",ghost:"bg-transparent text-[#8890A0] hover:bg-[#1A1B22] hover:text-[#E8E8F0]",outline:"bg-transparent border border-[#4A5060] text-[#E8E8F0] hover:border-[#7088A0] hover:bg-[#1A1B22]"}[r],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s],e),...i}));s.displayName="Button",e.s(["Button",()=>s])},52366,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(54579),s=e.i(59544),a=e.i(39964),i=e.i(68082);function o(){let{user:e,logout:o}=(0,n.useAuth)(),[l,c]=(0,r.useState)(!1);if(!e)return null;let d=async()=>{try{await o(),c(!1)}catch(e){console.error("Error during logout:",e)}},u=(e.displayName||e.email||"U")[0].toUpperCase();return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(s.Button,{variant:"ghost",className:"flex items-center gap-2 px-2",onClick:()=>c(!l),children:[e.photoURL?(0,t.jsx)("img",{src:e.photoURL,alt:e.displayName||"Usuario",className:"h-8 w-8 rounded-full"}):(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-[#D4B57A] flex items-center justify-center text-[#0D0E14] text-sm font-medium",children:u}),(0,t.jsx)("span",{className:"hidden md:block text-sm text-[#E8E8F0]",children:e.displayName||e.email?.split("@")[0]}),(0,t.jsx)("svg",{className:`h-4 w-4 text-[#8890A0] transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),(0,t.jsxs)(a.Card,{className:"absolute right-0 top-full mt-2 z-50 w-56 p-0 shadow-xl",children:[(0,t.jsx)("div",{className:"p-4 border-b border-[#4A5060]/30",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.photoURL?(0,t.jsx)("img",{src:e.photoURL,alt:"",className:"h-10 w-10 rounded-full"}):(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-[#D4B57A] flex items-center justify-center text-[#0D0E14] font-medium",children:u}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm text-[#E8E8F0] font-medium truncate",children:e.displayName||"Usuario"}),(0,t.jsx)("p",{className:"text-xs text-[#8890A0] truncate",children:e.email})]})]})}),(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsxs)("button",{onClick:()=>{c(!1),window.location.href="/dashboard"},className:"w-full px-3 py-2 text-sm text-left text-[#8890A0] hover:text-[#E8E8F0] hover:bg-[#1A1B22] rounded-md flex items-center gap-2",children:[(0,t.jsx)("span",{children:"üìä"})," Panel"]}),(0,t.jsxs)("button",{onClick:()=>{c(!1),window.location.href="/settings"},className:"w-full px-3 py-2 text-sm text-left text-[#8890A0] hover:text-[#E8E8F0] hover:bg-[#1A1B22] rounded-md flex items-center gap-2",children:[(0,t.jsx)("span",{children:"‚öôÔ∏è"})," Config"]}),(0,t.jsxs)("button",{onClick:async()=>{await (0,i.showTestNotification)(),c(!1)},className:"w-full px-3 py-2 text-sm text-left text-[#D4B57A] hover:bg-[#D4B57A]/10 rounded-md flex items-center gap-2",children:[(0,t.jsx)("span",{children:"üîî"})," Probar Notificaci√≥n"]}),(0,t.jsx)("div",{className:"border-t border-[#4A5060]/30 my-2"}),(0,t.jsxs)("button",{onClick:d,className:"w-full px-3 py-2 text-sm text-left text-[#F87171] hover:bg-[#F87171]/10 rounded-md flex items-center gap-2",children:[(0,t.jsx)("span",{children:"üö™"})," Salir"]})]})]})]})]})}e.s(["UserMenu",()=>o])},97211,e=>{"use strict";var t=e.i(43476);function r({size:e=40,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 180 180",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"90",cy:"65",r:"55",stroke:"#D4B57A",strokeWidth:"1",opacity:"0.1"}),(0,t.jsx)("circle",{cx:"90",cy:"65",r:"40",stroke:"#D4B57A",strokeWidth:"1.5",opacity:"0.2"}),(0,t.jsx)("circle",{cx:"90",cy:"65",r:"25",stroke:"#D4B57A",strokeWidth:"2",opacity:"0.35"}),(0,t.jsx)("path",{d:"M90 22 C90 22 148 38 148 88 C148 135 118 162 90 172 C62 162 32 135 32 88 C32 38 90 22 90 22 Z",fill:"url(#shield-gradient)",stroke:"#D4B57A",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M80 165 L84 100 L96 100 L100 165",fill:"#0D0E14",stroke:"#7088A0",strokeWidth:"1.5"}),(0,t.jsx)("rect",{x:"78",y:"94",width:"24",height:"10",rx:"2",fill:"#1A1B22",stroke:"#7088A0",strokeWidth:"1.5"}),(0,t.jsx)("circle",{cx:"90",cy:"65",r:"16",fill:"url(#light-gradient)"}),(0,t.jsx)("circle",{cx:"90",cy:"65",r:"8",fill:"#D4B57A"}),(0,t.jsx)("circle",{cx:"90",cy:"65",r:"3",fill:"#E8E8F0"}),(0,t.jsx)("line",{x1:"90",y1:"42",x2:"90",y2:"32",stroke:"#D4B57A",strokeWidth:"2",strokeLinecap:"round",opacity:"0.8"}),(0,t.jsx)("line",{x1:"108",y1:"50",x2:"115",y2:"43",stroke:"#D4B57A",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6"}),(0,t.jsx)("line",{x1:"72",y1:"50",x2:"65",y2:"43",stroke:"#D4B57A",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6"}),(0,t.jsx)("path",{d:"M78 135 L86 145 L104 125",stroke:"#A07888",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"shield-gradient",x1:"90",y1:"22",x2:"90",y2:"172",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#1A1B22"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#0D0E14"})]}),(0,t.jsxs)("radialGradient",{id:"light-gradient",cx:"0.5",cy:"0.5",r:"0.5",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#E8E8F0"}),(0,t.jsx)("stop",{offset:"40%",stopColor:"#D4B57A"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A07888",stopOpacity:"0.5"})]})]})]})}e.s(["DisasterIconMap",0,{earthquake:function({size:e=56,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"28",cy:"28",r:"24",fill:"#1A1B22",stroke:"#D4B57A",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M12 28 L18 20 L24 32 L30 16 L36 36 L44 28",stroke:"#D4B57A",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},tsunami:function({size:e=56,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"28",cy:"28",r:"24",fill:"#1A1B22",stroke:"#7088A0",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M8 30 Q14 22 20 30 Q26 38 32 30 Q38 22 44 30 Q50 38 56 30",stroke:"#7088A0",strokeWidth:"2.5",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M10 38 Q16 30 22 38 Q28 46 34 38 Q40 30 46 38",stroke:"#7088A0",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5"})]})},volcano:function({size:e=56,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"28",cy:"28",r:"24",fill:"#1A1B22",stroke:"#A07888",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M14 44 L24 24 L28 28 L32 24 L42 44 Z",fill:"#0D0E14",stroke:"#A07888",strokeWidth:"2"}),(0,t.jsx)("ellipse",{cx:"28",cy:"24",rx:"4",ry:"2",fill:"#D4B57A"}),(0,t.jsx)("circle",{cx:"28",cy:"16",r:"3",fill:"#D4B57A",opacity:"0.7"}),(0,t.jsx)("circle",{cx:"24",cy:"12",r:"2",fill:"#D4B57A",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"33",cy:"14",r:"1.5",fill:"#D4B57A",opacity:"0.4"})]})},wildfire:function({size:e=56,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"28",cy:"28",r:"24",fill:"#1A1B22",stroke:"#D4B57A",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M28 44 C20 44 16 36 16 30 C16 24 20 20 24 18 C22 22 24 26 28 26 C26 22 28 16 32 12 C32 20 36 22 38 26 C40 30 40 36 36 40 C34 42 32 44 28 44 Z",fill:"#D4B57A"}),(0,t.jsx)("path",{d:"M28 44 C24 44 22 40 22 36 C22 32 24 30 26 28 C25 31 26 33 28 33 C27 31 28 28 30 26 C30 30 32 32 33 34 C34 36 34 40 32 42 C31 43 30 44 28 44 Z",fill:"#E8E8F0",opacity:"0.8"})]})},flood:function({size:e=56,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"28",cy:"28",r:"24",fill:"#1A1B22",stroke:"#7088A0",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M8 24 Q14 18 20 24 Q26 30 32 24 Q38 18 44 24",stroke:"#7088A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M8 32 Q14 26 20 32 Q26 38 32 32 Q38 26 44 32",stroke:"#7088A0",strokeWidth:"2.5",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M8 40 Q14 34 20 40 Q26 46 32 40 Q38 34 44 40",stroke:"#7088A0",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6"})]})},storm:function({size:e=56,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"28",cy:"28",r:"24",fill:"#1A1B22",stroke:"#8890A0",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:"28",cy:"28",r:"8",fill:"none",stroke:"#8890A0",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"28",y1:"8",x2:"28",y2:"16",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"28",y1:"40",x2:"28",y2:"48",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"8",y1:"28",x2:"16",y2:"28",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"40",y1:"28",x2:"48",y2:"28",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"14",y1:"14",x2:"20",y2:"20",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"36",y1:"36",x2:"42",y2:"42",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"14",y1:"42",x2:"20",y2:"36",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("line",{x1:"36",y1:"20",x2:"42",y2:"14",stroke:"#8890A0",strokeWidth:"2",strokeLinecap:"round"})]})},landslide:function({size:e=56,className:r,...n}){return(0,t.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...n,children:[(0,t.jsx)("circle",{cx:"28",cy:"28",r:"24",fill:"#1A1B22",stroke:"#8890A0",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M16 16 L40 16 L28 44 Z",fill:"none",stroke:"#8890A0",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:"28",cy:"24",r:"3",fill:"#8890A0"}),(0,t.jsx)("circle",{cx:"24",cy:"32",r:"2.5",fill:"#8890A0",opacity:"0.8"}),(0,t.jsx)("circle",{cx:"32",cy:"32",r:"2.5",fill:"#8890A0",opacity:"0.8"}),(0,t.jsx)("circle",{cx:"28",cy:"38",r:"2",fill:"#8890A0",opacity:"0.6"})]})}},"SentinelLogo",()=>r])},72881,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(70703),s=e.i(58594);function a({onMyLocation:e,onToggleZones:n,showZones:s=!0,onFilterChange:a}){let[i,o]=(0,r.useState)(!1),l="w-9 h-9 bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg flex items-center justify-center text-sm hover:bg-[#4A5060]/30 hover:border-[#7088A0] transition-colors";return(0,t.jsxs)("div",{className:"absolute top-3 right-3 z-[1000] space-y-2",children:[(0,t.jsx)("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>e?.(),e=>console.error("Error getting location:",e))},className:l,title:"Mi ubicaci√≥n",children:"üìç"}),n&&(0,t.jsx)("button",{onClick:n,className:`${l} ${s?"bg-[#D4B57A]/20 border-[#D4B57A]/50 text-[#D4B57A]":""}`,title:s?"Ocultar zonas":"Mostrar zonas",children:"üè†"}),(0,t.jsx)("button",{onClick:()=>o(!i),className:l,title:"Leyenda",children:"‚ÑπÔ∏è"}),i&&(0,t.jsxs)("div",{className:"bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg p-3 shadow-xl min-w-[140px]",children:[(0,t.jsx)("h4",{className:"font-medium text-xs text-[#E8E8F0] mb-2",children:"Severidad"}),(0,t.jsxs)("div",{className:"space-y-1.5 text-xs text-[#8890A0]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#F87171]"}),(0,t.jsx)("span",{children:"Cr√≠tica"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#D4B57A]"}),(0,t.jsx)("span",{children:"Alta"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FBBF24]"}),(0,t.jsx)("span",{children:"Media"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#4ADE80]"}),(0,t.jsx)("span",{children:"Baja"})]})]})]})]})}let i=(0,n.default)(()=>e.A(52169).then(e=>e.MapContainer),{loadableGenerated:{modules:[94970]},ssr:!1,loading:()=>(0,t.jsx)(s.LoadingSpinner,{text:"Cargando mapa..."})}),o=(0,n.default)(()=>e.A(52169).then(e=>e.TileLayer),{loadableGenerated:{modules:[94970]},ssr:!1}),l=(0,n.default)(()=>e.A(25e3).then(e=>({default:e.EventMarker})),{loadableGenerated:{modules:[94735]},ssr:!1}),c=(0,n.default)(()=>e.A(43144).then(e=>({default:e.ZoneCircle})),{loadableGenerated:{modules:[35692]},ssr:!1});function d({events:e,userZones:n=[],center:d=[-33.45,-70.65],zoom:u=5,height:m="400px",showControls:x=!0,showZones:h=!0,onEventClick:f,onZoneClick:p,onMyLocation:g,onToggleZones:j,onFilterChange:y,className:b=""}){let[v,A]=(0,r.useState)(!1),[N,k]=(0,r.useState)(h);return((0,r.useEffect)(()=>{A(!0)},[]),v)?(0,t.jsxs)("div",{className:`w-full h-full ${b}`,children:[(0,t.jsxs)(i,{center:d,zoom:u,style:{height:"100%",width:"100%"},zoomControl:!1,children:[(0,t.jsx)(o,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'¬© <a href="https://carto.com/">CARTO</a>'}),N&&n.map(e=>(0,t.jsx)(c,{zone:e,onClick:p},`zone-${e.id}`)),e.map(e=>(0,t.jsx)(l,{event:e,onClick:f},`event-${e.id}`))]}),x&&(0,t.jsx)(a,{onMyLocation:g,onToggleZones:()=>{k(!N),j?.()},showZones:N,onFilterChange:y})]}):(0,t.jsx)("div",{className:`bg-surface border border-border rounded-lg flex items-center justify-center ${b}`,style:{height:m},children:(0,t.jsx)(s.LoadingSpinner,{text:"Cargando mapa..."})})}e.s(["DisasterMap",()=>d],72881)},66579,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(54579),s=e.i(28623),a=e.i(72881),i=e.i(59544),o=e.i(91285);let l=(0,r.forwardRef)(({isOpen:e,onClose:n,children:s,className:a},i)=>((0,r.useEffect)(()=>{let t=e=>{"Escape"===e.key&&n()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[e,n]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),(0,t.jsx)("div",{ref:i,className:(0,o.cn)("relative z-10 max-h-[90vh] max-w-[90vw] overflow-auto rounded-lg bg-surface p-6 shadow-xl",a),onClick:e=>e.stopPropagation(),children:s})]}):null);l.displayName="Modal";let c=(0,r.forwardRef)(({children:e,className:r},n)=>(0,t.jsx)("div",{ref:n,className:(0,o.cn)("mb-4 flex items-center justify-between",r),children:e}));c.displayName="ModalHeader";let d=(0,r.forwardRef)(({children:e,className:r},n)=>(0,t.jsx)("h2",{ref:n,className:(0,o.cn)("text-lg font-semibold text-foreground",r),children:e}));d.displayName="ModalTitle";let u=(0,r.forwardRef)(({onClick:e,className:r},n)=>(0,t.jsx)("button",{ref:n,onClick:e,className:(0,o.cn)("rounded-full p-1 text-foreground hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary-500",r),"aria-label":"Cerrar modal",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}));u.displayName="ModalCloseButton";var m=e.i(39964),x=e.i(58594);function h({initialData:e,onSubmit:n,onCancel:s,title:o}){let[l,h]=(0,r.useState)({name:e?.name||"",radiusKm:e?.radiusKm||50,location:e?.location||{lat:-33.45,lng:-70.65}}),[f,p]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),v=(e,t)=>{let r=parseFloat(e),n=parseFloat(t);isNaN(r)||isNaN(n)||h(e=>({...e,location:{lat:r,lng:n}}))},A=async t=>{if(t.preventDefault(),!l.name.trim())return void alert("Por favor ingresa un nombre para la zona");if(l.radiusKm<1||l.radiusKm>500)return void alert("El radio debe estar entre 1 y 500 km");try{p(!0),await n({name:l.name.trim(),location:l.location,geohash:"",radiusKm:l.radiusKm,isActive:e?.isActive??!0})}catch(e){console.error("Error submitting form:",e)}finally{p(!1)}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:o}),(0,t.jsx)(u,{onClick:s})]}),(0,t.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[(0,t.jsxs)(m.Card,{children:[(0,t.jsxs)(m.CardHeader,{children:[(0,t.jsx)(m.CardTitle,{className:"text-lg",children:"Informaci√≥n B√°sica"}),(0,t.jsx)(m.CardDescription,{children:"Configura el nombre y radio de la zona"})]}),(0,t.jsxs)(m.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Nombre de la zona *"}),(0,t.jsx)("input",{type:"text",value:l.name,onChange:e=>h(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ej: Mi casa, Trabajo, Ciudad...",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Radio de alerta (km) *"}),(0,t.jsx)("input",{type:"number",min:"1",max:"500",value:l.radiusKm,onChange:e=>h(t=>({...t,radiusKm:parseInt(e.target.value)||50})),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Recibir√°s alertas cuando eventos ocurran dentro de este radio"})]})]})]}),(0,t.jsxs)(m.Card,{children:[(0,t.jsx)(m.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.CardTitle,{className:"text-lg",children:"Ubicaci√≥n"}),(0,t.jsx)(m.CardDescription,{children:"Selecciona el centro de la zona en el mapa"})]}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{if(j(!0),b(null),!navigator.geolocation){b("La geolocalizaci√≥n no est√° soportada por este navegador"),j(!1);return}navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:r}=e.coords;h(e=>({...e,location:{lat:t,lng:r}})),j(!1)},e=>{console.error("Error getting location:",e);let t="Error al obtener la ubicaci√≥n";switch(e.code){case e.PERMISSION_DENIED:t="Permiso de ubicaci√≥n denegado";break;case e.POSITION_UNAVAILABLE:t="Ubicaci√≥n no disponible";break;case e.TIMEOUT:t="Tiempo de espera agotado"}b(t),j(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},disabled:g,children:g?(0,t.jsx)(x.LoadingSpinner,{}):"üìç Mi ubicaci√≥n"})]})}),(0,t.jsx)(m.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[y&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:y}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Latitud"}),(0,t.jsx)("input",{type:"number",step:"0.000001",value:l.location.lat,onChange:e=>v(e.target.value,l.location.lng.toString()),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"-33.456789"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Longitud"}),(0,t.jsx)("input",{type:"number",step:"0.000001",value:l.location.lng,onChange:e=>v(l.location.lat.toString(),e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"-70.678901"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["üìç Ubicaci√≥n actual: ",l.location.lat.toFixed(6),", ",l.location.lng.toFixed(6)]}),(0,t.jsx)("div",{className:"h-64 rounded-lg overflow-hidden border",children:(0,t.jsx)(a.DisasterMap,{events:[],center:[l.location.lat,l.location.lng],zoom:12,onEventClick:()=>{},onZoneClick:()=>{}})}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:'üí° Puedes ajustar las coordenadas manualmente o usar "Mi ubicaci√≥n" para centrar el mapa en tu posici√≥n actual'})]})})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:s,className:"flex-1",children:"Cancelar"}),(0,t.jsxs)(i.Button,{type:"submit",disabled:f,className:"flex-1",children:[f?(0,t.jsx)(x.LoadingSpinner,{}):null,e?"Actualizar Zona":"Crear Zona"]})]})]})]})}var f=e.i(96640);function p({zone:e,onEdit:r,onDelete:n,onToggle:s,className:a=""}){let o;return(0,t.jsx)(m.Card,{className:`${e.isActive?"border-primary-500 bg-primary-50/50":""} ${a}`,children:(0,t.jsx)(m.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,t.jsx)(f.Badge,{variant:e.isActive?"success":"secondary",children:e.isActive?"Activa":"Inactiva"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"üìè Radio:"})," ",e.radiusKm," km"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"üìÖ Creada:"})," ",(o=e.createdAt,new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"short",year:"numeric"}).format(o))]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"üìç Ubicaci√≥n:"})," ",e.location.lat.toFixed(4),", ",e.location.lng.toFixed(4)]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,t.jsx)(i.Button,{size:"sm",variant:e.isActive?"plasma":"outline",onClick:s,className:"min-w-[80px]",children:e.isActive?"Desactivar":"Activar"}),(0,t.jsx)(i.Button,{size:"sm",variant:"outline",onClick:r,children:"‚úèÔ∏è Editar"}),(0,t.jsx)(i.Button,{size:"sm",variant:"outline",onClick:n,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"üóëÔ∏è Eliminar"})]})]})})})}function g({className:e=""}){let{user:a}=(0,n.useAuth)(),{zones:o,loading:c,error:d,createZone:u,updateZone:f,removeZone:g,toggleZone:j}=function(){let{user:e}=(0,n.useAuth)(),[t,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),d=e?.uid,u=(0,r.useCallback)(async()=>{if(!d)return void a([]);try{o(!0),c(null);let e=await (0,s.getUserZones)(d);a(e)}catch(e){console.error("Error loading zones:",e),c("Error al cargar zonas")}finally{o(!1)}},[d]);(0,r.useEffect)(()=>{u()},[u]);let m=(0,r.useCallback)(async e=>{if(!d)throw Error("Usuario no autenticado");try{c(null);let t=await (0,s.addUserZone)(d,e);return await u(),t}catch(e){throw console.error("Error creating zone:",e),c("Error al crear zona"),e}},[d,u]),x=(0,r.useCallback)(async(e,t)=>{if(!d)throw Error("Usuario no autenticado");try{c(null),await (0,s.updateUserZone)(d,e,t),await u()}catch(e){throw console.error("Error updating zone:",e),c("Error al actualizar zona"),e}},[d,u]),h=(0,r.useCallback)(async e=>{if(!d)throw Error("Usuario no autenticado");try{c(null),await (0,s.deleteUserZone)(d,e),await u()}catch(e){throw console.error("Error deleting zone:",e),c("Error al eliminar zona"),e}},[d,u]),f=(0,r.useCallback)(async(e,t)=>x(e,{isActive:t}),[x]),p=t.filter(e=>e.isActive),g=(0,r.useCallback)((e,t,r=0)=>p.some(n=>{var s,a,i,o;let l,c,d;return s=e,a=t,i=n.location.lat,o=n.location.lng,2*Math.atan2(Math.sqrt(d=Math.sin((l=(s-i)*Math.PI/180)/2)*Math.sin(l/2)+Math.cos(i*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin((c=(a-o)*Math.PI/180)/2)*Math.sin(c/2)),Math.sqrt(1-d))*6371<=n.radiusKm+r}),[p]);return{zones:t,activeZones:p,loading:i,error:l,createZone:m,updateZone:x,removeZone:h,toggleZone:f,refresh:u,isLocationInUserZones:g}}(),[y,b]=(0,r.useState)(!1),[v,A]=(0,r.useState)(null),N=async e=>{try{await u(e),b(!1)}catch(e){console.error("Error creating zone:",e)}},k=async e=>{if(v)try{await f(v.id,e),A(null)}catch(e){console.error("Error updating zone:",e)}},w=async e=>{if(confirm("¬øEst√°s seguro de que quieres eliminar esta zona?"))try{await g(e)}catch(e){console.error("Error deleting zone:",e)}};return a?(0,t.jsxs)("div",{className:e,children:[(0,t.jsxs)(m.Card,{children:[(0,t.jsx)(m.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.CardTitle,{children:"Mis Zonas de Monitoreo"}),(0,t.jsx)(m.CardDescription,{children:"Configura las √°reas geogr√°ficas donde quieres recibir alertas"})]}),(0,t.jsx)(i.Button,{onClick:()=>b(!0),children:"‚ûï Agregar Zona"})]})}),(0,t.jsx)(m.CardContent,{children:c?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)(x.LoadingSpinner,{text:"Cargando zonas..."})}):d?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-red-500 mb-2",children:"‚ö†Ô∏è Error al cargar zonas"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:d}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>window.location.reload(),children:"Reintentar"})]}):0===o.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"üó∫Ô∏è"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No tienes zonas configuradas"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Crea tu primera zona para empezar a recibir alertas personalizadas"}),(0,t.jsx)(i.Button,{onClick:()=>b(!0),children:"Crear Primera Zona"})]}):(0,t.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,t.jsx)(p,{zone:e,onEdit:()=>A(e),onDelete:()=>w(e.id),onToggle:()=>j(e.id,!e.isActive)},e.id))})})]}),(0,t.jsx)(l,{isOpen:y,onClose:()=>b(!1),children:(0,t.jsx)(h,{onSubmit:N,onCancel:()=>b(!1),title:"Crear Nueva Zona"})}),(0,t.jsx)(l,{isOpen:!!v,onClose:()=>A(null),children:v&&(0,t.jsx)(h,{initialData:v,onSubmit:k,onCancel:()=>A(null),title:"Editar Zona"})})]}):(0,t.jsx)(m.Card,{className:e,children:(0,t.jsx)(m.CardContent,{className:"text-center py-8",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Debes iniciar sesi√≥n para gestionar tus zonas"})})})}e.s(["ZoneManager",()=>g],66579)},45123,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(54579),s=e.i(37772),a=e.i(39964),i=e.i(59544),o=e.i(96640),l=e.i(58594);function c({className:e=""}){let{user:c}=(0,n.useAuth)(),[d,u]=(0,r.useState)({}),[m,x]=(0,r.useState)(!0),[h,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(c?.uid)try{x(!0);let e={};s.DISASTER_TYPES.forEach(t=>{e[t]={disasterType:t,minSeverity:1,pushEnabled:!0,emailEnabled:!1}}),u(e)}catch(e){console.error("Error loading preferences:",e)}finally{x(!1)}})()},[c?.uid]);let p=async(e,t,r)=>{try{f(e),u(n=>({...n,[e]:{...n[e],[t]:r}})),await new Promise(e=>setTimeout(e,500))}catch(e){console.error("Error updating preference:",e)}finally{f(null)}};return c?m?(0,t.jsx)(a.Card,{className:e,children:(0,t.jsx)(a.CardContent,{className:"text-center py-8",children:(0,t.jsx)(l.LoadingSpinner,{text:"Cargando preferencias..."})})}):(0,t.jsxs)(a.Card,{className:e,children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{children:"Preferencias de Alertas"}),(0,t.jsx)(a.CardDescription,{children:"Configura qu√© tipos de desastres quieres monitorear y c√≥mo recibir las alertas"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{s.DISASTER_TYPES.forEach(e=>{d[e]?.pushEnabled||p(e,"pushEnabled",!0)})},children:"Activar Todas"}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{s.DISASTER_TYPES.forEach(e=>{d[e]?.pushEnabled&&p(e,"pushEnabled",!1)})},children:"Desactivar Todas"})]})]})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"space-y-4",children:s.DISASTER_TYPES.map(e=>{let r=s.DISASTER_CONFIGS[e],n=d[e],a=h===e;return n?(0,t.jsxs)("div",{className:"border border-border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)("span",{className:"text-2xl",children:r.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold",children:r.nameEs}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r.name})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Severidad m√≠n."}),(0,t.jsx)("select",{value:n.minSeverity,onChange:t=>p(e,"minSeverity",parseInt(t.target.value)),disabled:a,className:"text-sm border border-border rounded px-2 py-1 disabled:opacity-50",children:[1,2,3,4].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Push"}),(0,t.jsx)("input",{type:"checkbox",checked:n.pushEnabled,onChange:t=>p(e,"pushEnabled",!n.pushEnabled),disabled:a,className:"w-4 h-4 text-primary-600 border-border rounded focus:ring-primary-500"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Email"}),(0,t.jsx)("input",{type:"checkbox",checked:n.emailEnabled,onChange:t=>p(e,"emailEnabled",!n.emailEnabled),disabled:a,className:"w-4 h-4 text-primary-600 border-border rounded focus:ring-primary-500"})]}),(0,t.jsx)("div",{className:"text-right",children:a?(0,t.jsx)(l.LoadingSpinner,{}):(0,t.jsx)(o.Badge,{variant:n.pushEnabled?"success":"secondary",children:n.pushEnabled?"Activo":"Inactivo"})})]})]}),(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:"Niveles de severidad:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:Object.entries(r.severityLabels).map(([e,r])=>(0,t.jsx)(o.Badge,{variant:parseInt(e)>=n.minSeverity?"plasma":"secondary",className:"text-xs",children:r},e))})]})]},e):null})}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"üí° Consejos"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,t.jsxs)("li",{children:["‚Ä¢ ",(0,t.jsx)("strong",{children:"Severidad m√≠nima:"})," Solo recibir√°s alertas para eventos de esta severidad o superior"]}),(0,t.jsxs)("li",{children:["‚Ä¢ ",(0,t.jsx)("strong",{children:"Notificaciones push:"})," Alertas en tiempo real en tu dispositivo"]}),(0,t.jsxs)("li",{children:["‚Ä¢ ",(0,t.jsx)("strong",{children:"Notificaciones email:"})," Res√∫menes diarios por correo electr√≥nico"]}),(0,t.jsx)("li",{children:"‚Ä¢ Puedes ajustar estas preferencias en cualquier momento"})]})]})]})]}):(0,t.jsx)(a.Card,{className:e,children:(0,t.jsx)(a.CardContent,{className:"text-center py-8",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Debes iniciar sesi√≥n para gestionar tus preferencias de alertas"})})})}e.s(["AlertPreferences",()=>c])},52169,e=>{e.v(t=>Promise.all(["static/chunks/983c3130c13fb657.js","static/chunks/1442f9ddf5556540.js"].map(t=>e.l(t))).then(()=>t(94970)))},25e3,e=>{e.v(t=>Promise.all(["static/chunks/9fa7c84b99df7249.js","static/chunks/1442f9ddf5556540.js"].map(t=>e.l(t))).then(()=>t(94735)))},43144,e=>{e.v(t=>Promise.all(["static/chunks/182f490ad391f383.js"].map(t=>e.l(t))).then(()=>t(35692)))}]);