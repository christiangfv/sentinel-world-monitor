(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{3292:(e,t,r)=>{Promise.resolve().then(r.bind(r,1796))},6046:(e,t,r)=>{"use strict";var n=r(6658);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},1796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(5155),a=r(7641),s=r(2167),i=r(2115),o=r(5502);function l(){let{mockSignIn:e}=(0,o.As)(),[t,r]=(0,i.useState)(!1),a=async()=>{try{r(!0),await e()}catch(e){console.error("Error during mock login:",e)}finally{r(!1)}};return(0,n.jsx)("button",{onClick:a,disabled:t,className:"text-xs text-[#8890A0] hover:text-[#D4B57A] underline underline-offset-4 transition-colors disabled:opacity-50",children:t?"Iniciando...":"Entrar como Invitado (Modo Prueba)"})}var c=r(4450);let d=[{icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z",clipRule:"evenodd"})}),title:"Mapa Interactivo",description:"Ver eventos en tiempo real"},{icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),title:"Zonas Personalizadas",description:"Configura \xe1reas de inter\xe9s"},{icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),title:"Alertas Push",description:"Notificaciones inteligentes"},{icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M7 2a2 2 0 00-2 2v12a2 2 0 002 2h6a2 2 0 002-2V4a2 2 0 00-2-2H7zm3 14a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),title:"PWA Offline",description:"Funciona sin conexi\xf3n"}];function u(){return(0,n.jsx)(a.AuthGuard,{requireAuth:!1,redirectTo:"/",children:(0,n.jsxs)("div",{className:"min-h-screen bg-[#0D0E14] flex items-center justify-center p-4 relative overflow-hidden",children:[(0,n.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,n.jsx)("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-radial from-[#D4B57A]/5 to-transparent rounded-full blur-3xl"}),(0,n.jsx)("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-radial from-[#7088A0]/5 to-transparent rounded-full blur-3xl"})]}),(0,n.jsxs)(c.Zp,{className:"w-full max-w-md shadow-[0_20px_60px_rgba(0,0,0,0.5)] border-[#4A5060]/40 animate-fadeInUp relative z-10",children:[(0,n.jsxs)(c.aR,{className:"text-center pb-2",children:[(0,n.jsx)("div",{className:"flex justify-center mb-6",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-[#D4B57A]/20 rounded-full blur-xl animate-pulse"}),(0,n.jsx)("div",{className:"relative flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-[#D4B57A] to-[#A8925A] shadow-[0_0_30px_rgba(212,181,122,0.3)]",children:(0,n.jsx)("svg",{className:"w-10 h-10 text-[#0D0E14]",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z",clipRule:"evenodd"})})})]})}),(0,n.jsx)(c.ZB,{className:"text-2xl md:text-3xl mb-2 text-gradient-plasma font-bold",children:"Bienvenido a Sentinel"}),(0,n.jsx)(c.BT,{className:"text-base text-[#8890A0]",children:"Monitorea desastres naturales en tiempo real y recibe alertas personalizadas"})]}),(0,n.jsxs)(c.Wu,{className:"space-y-6 pt-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-2 text-[#E8E8F0]",children:"Inicia sesi\xf3n para continuar"}),(0,n.jsx)("p",{className:"text-sm text-[#8890A0]",children:"Usa tu cuenta de Google para acceder a todas las funcionalidades"})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 pt-4",children:[(0,n.jsx)(s.M,{}),(0,n.jsx)(l,{})]})]}),(0,n.jsx)("div",{className:"border-t border-[#4A5060]/30 pt-6",children:(0,n.jsxs)("div",{className:"text-center space-y-4",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold text-[#8890A0] uppercase tracking-wider",children:"\xbfQu\xe9 puedes hacer con Sentinel?"}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-2 text-left",children:d.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-[#4A5060]/10 hover:bg-[#4A5060]/20 transition-colors group",style:{animationDelay:"".concat(100*t,"ms")},children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[#D4B57A]/20 to-[#D4B57A]/5 flex items-center justify-center text-[#D4B57A] group-hover:scale-110 transition-transform",children:e.icon}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium text-[#E8E8F0]",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-[#8890A0]",children:e.description})]})]},e.title))})]})})]})]})]})})}},7641:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>l});var n=r(5155),a=r(2115),s=r(6046),i=r(5502),o=r(631);function l(e){let{children:t,redirectTo:r="/login",requireAuth:l=!0}=e,{user:c,loading:d}=(0,i.As)(),u=(0,s.useRouter)();return((0,a.useEffect)(()=>{d||(l&&!c?u.push(r):!l&&c&&u.push("/"))},[c,d,l,r,u]),d)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)(o.k,{text:"Verificando sesi\xf3n..."})}):l&&!c||!l&&c?null:(0,n.jsx)(n.Fragment,{children:t})}},2167:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var n=r(5155),a=r(2115),s=r(6046),i=r(5502);function o(){let{signIn:e,loading:t}=(0,i.As)(),r=(0,s.useRouter)(),[o,l]=(0,a.useState)(!1),c=async()=>{try{l(!0),await e(),r.push("/")}catch(e){console.error("Error during login:",e)}finally{l(!1)}},d=o||t;return(0,n.jsxs)("button",{onClick:c,disabled:d,className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium text-[#E8E8F0] hover:text-[#D4B57A] transition-colors disabled:opacity-50",children:[d?(0,n.jsx)("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,n.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,n.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,n.jsx)("span",{children:d?"...":"Entrar"})]})}},4450:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>i});var n=r(5155),a=r(1684);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("bg-[#1A1B22]/85 backdrop-blur-xl border border-[#D4B57A]/10 rounded-2xl shadow-[0_8px_32px_0_rgba(0,0,0,0.37)]","transition-all duration-300 ease-out","hover:border-[#D4B57A]/30 hover:bg-[#1A1B22]/95","ring-1 ring-white/5 ring-inset",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("p-6 pb-2",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("h3",{className:(0,a.cn)("text-[#E8E8F0] font-semibold tracking-tight",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("p",{className:(0,a.cn)("text-[#8890A0] text-sm mt-1.5 leading-relaxed",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("",t),...r})}},631:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var n=r(5155);function a(e){let{size:t="md",className:r=""}=e;return(0,n.jsx)("div",{className:"".concat({sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-8 h-8 border-3"}[t]," border-[#D4B57A] border-t-transparent rounded-full animate-spin ").concat(r)})}function s(e){let{text:t}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3 py-8",children:[(0,n.jsx)(a,{size:"lg"}),t&&(0,n.jsx)("p",{className:"text-[#8890A0] text-sm",children:t})]})}},3954:(e,t,r)=>{"use strict";r.d(t,{Bh:()=>c,CI:()=>l,G6:()=>o,mJ:()=>m,st:()=>u});var n=r(5877),a=r(7058),s=r(3090);let i=new n.HF;async function o(){try{let e=(await (0,n.df)(s.j2,i)).user,t={email:e.email,displayName:e.displayName||e.email.split("@")[0],photoURL:e.photoURL||void 0,fcmToken:void 0,settings:{language:"es",darkMode:!1,soundEnabled:!0},createdAt:new Date,updatedAt:new Date};return await (0,a.setDoc)((0,a.doc)(s.db,"users",e.uid),{...t,createdAt:(0,a.serverTimestamp)(),updatedAt:(0,a.serverTimestamp)()},{merge:!0}),{uid:e.uid,...t}}catch(e){throw console.error("Error signing in with Google:",e),function(e){switch(e.code){case"auth/popup-closed-by-user":return Error("Inicio de sesi\xf3n cancelado");case"auth/popup-blocked":return Error("Popup bloqueado por el navegador");case"auth/network-request-failed":return Error("Error de conexi\xf3n");case"auth/too-many-requests":return Error("Demasiados intentos. Int\xe9ntalo m\xe1s tarde");default:return Error("Error al iniciar sesi\xf3n")}}(e)}}async function l(){try{await (0,n.CI)(s.j2)}catch(e){throw console.error("Error signing out:",e),Error("Error al cerrar sesi\xf3n")}}function c(e){return(0,n.hg)(s.j2,async t=>{if(t)try{let r=await d(t.uid);e(r)}catch(t){console.error("Error getting user data:",t),e(null)}else e(null)})}async function d(e){try{let a=await Promise.resolve().then(r.bind(r,7058)).then(t=>{let{getDoc:r,doc:n}=t;return r(n(s.db,"users",e))});if(a.exists()){var t,n;let r=a.data();return{uid:e,email:r.email,displayName:r.displayName,photoURL:r.photoURL,fcmToken:r.fcmToken,settings:r.settings||{language:"es",darkMode:!1,soundEnabled:!0},createdAt:(null===(t=r.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(n=r.updatedAt)||void 0===n?void 0:n.toDate())||new Date}}return null}catch(e){return console.error("Error getting user data:",e),null}}async function u(e,t){try{await Promise.resolve().then(r.bind(r,7058)).then(async r=>{let{updateDoc:n,doc:a,serverTimestamp:i}=r;await n(a(s.db,"users",e),{fcmToken:t,updatedAt:i()})})}catch(e){console.error("Error updating FCM token:",e)}}async function m(e,t){try{await Promise.resolve().then(r.bind(r,7058)).then(async r=>{let{updateDoc:n,doc:a,serverTimestamp:i}=r;await n(a(s.db,"users",e),{settings:t,updatedAt:i()})})}catch(e){throw console.error("Error updating user settings:",e),Error("Error al actualizar configuraci\xf3n")}}i.setCustomParameters({prompt:"select_account"})},3090:(e,t,r)=>{"use strict";r.d(t,{H9:()=>m,JQ:()=>u,db:()=>d,j2:()=>c});var n=r(9904),a=r(5877),s=r(7058),i=r(8359);let o={apiKey:"AIzaSyDp2z1FBMgNWJeAhOuOXgrglx9yFf_ras8",authDomain:"sentinel-prod-9c937.firebaseapp.com",projectId:"sentinel-prod-9c937",storageBucket:"sentinel-prod-9c937.firebasestorage.app",messagingSenderId:"846642937822",appId:"1:846642937822:web:b0db6f6c5f3db4c3d3274f"};if(!o.apiKey||!o.projectId)throw console.error("Firebase config incomplete:",{hasApiKey:!!o.apiKey,hasProjectId:!!o.projectId,hasAuthDomain:!!o.authDomain}),Error("Firebase configuration is incomplete. Check environment variables.");let l=0===(0,n.Dk)().length?(0,n.Wp)(o):(0,n.Dk)()[0],c=(0,a.xI)(l),d=(0,s.getFirestore)(l);console.log("Firebase initialized:",{projectId:o.projectId,hasAuth:!!c,hasDb:!!d});let u="BHOX3qNmiQt7WlXM0ZxYlWlmiAIgK-bJxzfexJ6rRQYwPjNnrc-XMxIvkwyakuJ2hLGiCSl8KM-mueYni4fL9zc";async function m(){try{if(!await (0,i.TT)())return console.warn("Firebase Messaging no est\xe1 soportado en este navegador"),null;let e=(0,i.dG)(l);if("serviceWorker"in navigator){let e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado:",e),e.active&&e.active.postMessage({type:"FIREBASE_CONFIG",config:o})}return e}catch(e){return console.error("Error initializing Firebase Messaging:",e),null}}},2988:(e,t,r)=>{"use strict";r.d(t,{UV:()=>u,XM:()=>m,XT:()=>f,hH:()=>h,qM:()=>p});var n=r(8359),a=r(3090),s=r(3954);let i=null;async function o(){try{return i=await (0,a.H9)(),null!==i}catch(e){return console.error("Error checking messaging support:",e),!1}}async function l(){if(!await o())return console.warn("Firebase Messaging no est\xe1 soportado en este navegador"),!1;try{let e=await Notification.requestPermission();return"granted"===e}catch(e){return console.error("Error requesting notification permission:",e),!1}}async function c(){if(!await o()||!i)return null;if(!a.JQ)return console.error("VAPID_KEY no configurada"),null;try{return await (0,n.gf)(i,{vapidKey:a.JQ})||null}catch(e){return console.error("Error getting FCM token:",e),null}}async function d(e){try{let t=await c();if(t)return await (0,s.st)(e,t),!0;return!1}catch(e){return console.error("Error registering FCM token:",e),!1}}function u(e){return i?(0,n.xD)(i,t=>{if(console.log("Mensaje recibido en primer plano:",t),"granted"===Notification.permission){let{title:e,body:n}=t.notification||{};if(e&&n){var r;new Notification(e,{body:n,icon:"/icons/icon-192.svg",badge:"/icons/badge-72.svg",tag:(null===(r=t.data)||void 0===r?void 0:r.eventId)||"sentinel-notification"})}}e(t)}):(console.warn("Firebase Messaging no disponible para mensajes en primer plano"),()=>{})}async function m(){"granted"===Notification.permission?new Notification("\uD83D\uDD14 Sentinel - Prueba",{body:"Esta es una notificaci\xf3n de prueba de Sentinel",icon:"/icons/icon-192.svg",badge:"/icons/badge-72.svg",tag:"sentinel-test"}):console.warn("Permiso de notificaciones no concedido")}function h(){return Notification.permission}function p(){return"granted"===Notification.permission}async function f(e){return await o()?!!("default"!==Notification.permission||await l())&&"granted"===Notification.permission&&await d(e):(console.warn("Firebase Messaging no soportado"),!1)}},5502:(e,t,r)=>{"use strict";r.d(t,{As:()=>c,AuthProvider:()=>l});var n=r(5155),a=r(2115),s=r(3954),i=r(2988);let o=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("sentinel_mock_user");if(e)try{l(JSON.parse(e)),d(!1);return}catch(e){console.error("Error parsing saved mock user:",e),localStorage.removeItem("sentinel_mock_user")}return(0,s.Bh)(async e=>{if(!localStorage.getItem("sentinel_mock_user")&&(l(e),d(!1),e))try{await (0,i.XT)(e.uid)}catch(e){console.error("Error initializing notifications:",e)}})},[]);let u=async()=>{try{d(!0),await (0,s.G6)()}catch(e){throw d(!1),e}},m=async()=>{try{d(!0);let e={uid:"mock-user-123",email:"test@sentinel.app",displayName:"Usuario de Prueba",settings:{language:"es",darkMode:!0,soundEnabled:!0},createdAt:new Date,updatedAt:new Date};l(e),localStorage.setItem("sentinel_mock_user",JSON.stringify(e)),d(!1);try{await (0,i.XT)(e.uid)}catch(e){console.warn("Mock status: Notifications initialization skipped or failed in test environment")}}catch(e){throw d(!1),e}},h=async()=>{try{localStorage.removeItem("sentinel_mock_user"),await (0,s.CI)(),l(null)}catch(e){throw console.error("Error signing out:",e),e}},p=async()=>{};return(0,n.jsx)(o.Provider,{value:{user:r,loading:c,signIn:u,mockSignIn:m,logout:h,refreshUser:p},children:t})}function c(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1684:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(3463),a=r(9795);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[135,563,445,181,441,517,358],()=>t(3292)),_N_E=e.O()}]);