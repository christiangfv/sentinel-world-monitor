(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327,708],{1708:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DisasterMap:()=>h});var s=a(5155),n=a(2115),l=a(7711),r=a(631);function o(e){let{onMyLocation:t,onToggleZones:a,showZones:l=!0,onFilterChange:r}=e,[o,d]=(0,n.useState)(!1),c="w-9 h-9 bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg flex items-center justify-center text-sm hover:bg-[#4A5060]/30 hover:border-[#7088A0] transition-colors";return(0,s.jsxs)("div",{className:"absolute top-3 right-3 z-[1000] space-y-2",children:[(0,s.jsx)("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>null==t?void 0:t(),e=>console.error("Error getting location:",e))},className:c,title:"Mi ubicaci\xf3n",children:"\uD83D\uDCCD"}),a&&(0,s.jsx)("button",{onClick:a,className:"".concat(c," ").concat(l?"bg-[#D4B57A]/20 border-[#D4B57A]/50 text-[#D4B57A]":""),title:l?"Ocultar zonas":"Mostrar zonas",children:"\uD83C\uDFE0"}),(0,s.jsx)("button",{onClick:()=>d(!o),className:c,title:"Leyenda",children:"ℹ️"}),o&&(0,s.jsxs)("div",{className:"bg-[#1A1B22] border border-[#4A5060]/50 rounded-lg p-3 shadow-xl min-w-[140px]",children:[(0,s.jsx)("h4",{className:"font-medium text-xs text-[#E8E8F0] mb-2",children:"Severidad"}),(0,s.jsxs)("div",{className:"space-y-1.5 text-xs text-[#8890A0]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#F87171]"}),(0,s.jsx)("span",{children:"Cr\xedtica"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#D4B57A]"}),(0,s.jsx)("span",{children:"Alta"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#FBBF24]"}),(0,s.jsx)("span",{children:"Media"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#4ADE80]"}),(0,s.jsx)("span",{children:"Baja"})]})]})]})]})}a(8413);let d=(0,l.default)(()=>Promise.all([a.e(761),a.e(889)]).then(a.bind(a,1889)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[1889]},ssr:!1,loading:()=>(0,s.jsx)(r.k,{text:"Cargando mapa..."})}),c=(0,l.default)(()=>Promise.all([a.e(761),a.e(889)]).then(a.bind(a,1889)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[1889]},ssr:!1}),i=(0,l.default)(()=>Promise.all([a.e(761),a.e(284)]).then(a.bind(a,5903)).then(e=>({default:e.EventMarker})),{loadableGenerated:{webpack:()=>[5903]},ssr:!1}),u=(0,l.default)(()=>a.e(160).then(a.bind(a,4160)).then(e=>({default:e.ZoneCircle})),{loadableGenerated:{webpack:()=>[4160]},ssr:!1}),x=(0,l.default)(()=>a.e(88).then(a.bind(a,8088)).then(e=>({default:e.MapController})),{loadableGenerated:{webpack:()=>[8088]},ssr:!1});function h(e){let{events:t,selectedEvent:a,userZones:l=[],center:h=[-33.45,-70.65],zoom:m=5,height:b="400px",showControls:p=!0,showZones:f=!0,onEventClick:j,onZoneClick:g,onMyLocation:v,onToggleZones:N,onFilterChange:w,className:C=""}=e,[k,A]=(0,n.useState)(!1),[D,y]=(0,n.useState)(f);return((0,n.useEffect)(()=>{A(!0)},[]),k)?(0,s.jsxs)("div",{className:"w-full h-full ".concat(C),children:[(0,s.jsxs)(d,{center:h,zoom:m,style:{height:"100%",width:"100%"},zoomControl:!1,children:[(0,s.jsx)(x,{selectedEvent:a}),(0,s.jsx)(c,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://carto.com/">CARTO</a>'}),D&&l.map(e=>(0,s.jsx)(u,{zone:e,onClick:g},"zone-".concat(e.id))),t.map(e=>(0,s.jsx)(i,{event:e,onClick:j},"event-".concat(e.id)))]}),p&&(0,s.jsx)(o,{onMyLocation:v,onToggleZones:()=>{y(!D),null==N||N()},showZones:D,onFilterChange:w})]}):(0,s.jsx)("div",{className:"bg-surface border border-border rounded-lg flex items-center justify-center ".concat(C),style:{height:b},children:(0,s.jsx)(r.k,{text:"Cargando mapa..."})})}},631:(e,t,a)=>{"use strict";a.d(t,{k:()=>l});var s=a(5155);function n(e){let{size:t="md",className:a=""}=e;return(0,s.jsx)("div",{className:"".concat({sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-8 h-8 border-3"}[t]," border-[#D4B57A] border-t-transparent rounded-full animate-spin ").concat(a)})}function l(e){let{text:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 py-8",children:[(0,s.jsx)(n,{size:"lg"}),t&&(0,s.jsx)("p",{className:"text-[#8890A0] text-sm",children:t})]})}},8413:()=>{}}]);